/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ethers")):"function"==typeof define&&define.amd?define(["ethers"],e):"object"==typeof exports?exports.GunEth=e(require("ethers")):t.GunEth=e(t.ethers)}(this,(t=>(()=>{var e={526:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=s(t),a=i[0],u=i[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),f=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=255&e;return 2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[f++]=255&e),1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[f++]=e>>8&255,c[f++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,c=r-o;s<c;s+=a)i.push(u(t,s,s+a>c?c:s+a));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},287:(t,e,n)=>{"use strict";const r=n(526),o=n(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=u,e.IS=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|d(t,e);let r=s(n);const o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(V(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const o=function(t){if(u.isBuffer(t)){const e=0|y(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?s(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return f(t),s(t<0?0:0|y(t))}function p(t){const e=t.length<0?0:0|y(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function y(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(o)return r?-1:W(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){let i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(c(t,i+r)!==c(e,r)){n=!1;break}if(n)return i}return-1}function w(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(Y(r))return a;t[n+a]=r}return a}function S(t,e,n,r){return z(W(e,t.length-n),t,n,r)}function A(t,e,n,r){return z(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return z(q(e),t,n,r)}function E(t,e,n,r){return z(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(i=u));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return f(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(V(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),V(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(V(e,Uint8Array))o+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,o){if(V(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),c=this.slice(r,o),f=t.slice(e,n);for(let t=0;t<s;++t)if(c[t]!==f[t]){i=c[t],a=f[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":case"latin1":case"binary":return A(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function j(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function T(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function D(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=Q[t[r]];return o}function I(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r,o){G(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function R(t,e,n,r,o){G(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function U(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(t,e,n,r,i){return e=+e,n>>>=0,i||U(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function C(t,e,n,r,i){return e=+e,n>>>=0,i||U(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Z((function(t){K(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||H(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(t){K(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||H(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Z((function(t){K(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||H(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Z((function(t){K(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||H(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||B(this,t,e,n,Math.pow(2,8*n)-1,0);let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||B(this,t,e,n,Math.pow(2,8*n)-1,0);let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Z((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);B(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);B(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Z((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return $(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return $(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return C(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return C(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const F={};function M(t,e,n){F[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function L(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function G(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){K(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||H(e,t.length-(n+1))}(r,o,i)}function K(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,n){if(Math.floor(t)!==t)throw K(t,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=L(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=L(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const J=/[^+/0-9A-Za-z-_]/g;function W(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function q(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function V(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const Q=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Z(t){return"undefined"==typeof BigInt?X:t}function X(){throw new Error("BigInt not supported")}},75:(t,e,n)=>{"use strict";var r=n(453),o=n(487),i=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&i(t,".prototype.")>-1?o(n):n}},487:(t,e,n)=>{"use strict";var r=n(743),o=n(453),i=n(897),a=n(675),s=o("%Function.prototype.apply%"),u=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||r.call(u,s),f=n(36),l=o("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new a("a function is required");var e=c(r,u,arguments);return i(e,1+l(0,t.length-(arguments.length-1)),!0)};var p=function(){return c(r,s,arguments)};f?f(t.exports,"apply",{value:p}):t.exports.apply=p},41:(t,e,n)=>{"use strict";var r=n(36),o=n(68),i=n(675),a=n(795);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,f=arguments.length>6&&arguments[6],l=!!a&&a(t,e);if(r)r(t,e,{configurable:null===c&&l?l.configurable:!c,enumerable:null===s&&l?l.enumerable:!s,value:n,writable:null===u&&l?l.writable:!u});else{if(!f&&(s||u||c))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},36:(t,e,n)=>{"use strict";var r=n(453)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(t){r=!1}t.exports=r},237:t=>{"use strict";t.exports=EvalError},383:t=>{"use strict";t.exports=Error},290:t=>{"use strict";t.exports=RangeError},538:t=>{"use strict";t.exports=ReferenceError},68:t=>{"use strict";t.exports=SyntaxError},675:t=>{"use strict";t.exports=TypeError},345:t=>{"use strict";t.exports=URIError},353:t=>{"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var o=0;o<e.length;o+=1)n[o+t.length]=e[o];return n};t.exports=function(t){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(t){for(var e=[],n=1,r=0;n<t.length;n+=1,r+=1)e[r]=t[n];return e}(arguments),s=n(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(t){for(var e="",n=0;n<t.length;n+=1)e+=t[n],n+1<t.length&&(e+=",");return e}(u)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var e=o.apply(this,r(a,arguments));return Object(e)===e?e:this}return o.apply(t,r(a,arguments))})),o.prototype){var f=function(){};f.prototype=o.prototype,i.prototype=new f,f.prototype=null}return i}},743:(t,e,n)=>{"use strict";var r=n(353);t.exports=Function.prototype.bind||r},453:(t,e,n)=>{"use strict";var r,o=n(383),i=n(237),a=n(290),s=n(538),u=n(68),c=n(675),f=n(345),l=Function,p=function(t){try{return l('"use strict"; return ('+t+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(t){h=null}var y=function(){throw new c},d=h?function(){try{return y}catch(t){try{return h(arguments,"callee").get}catch(t){return y}}}():y,g=n(39)(),m=n(24)(),b=Object.getPrototypeOf||(m?function(t){return t.__proto__}:null),v={},w="undefined"!=typeof Uint8Array&&b?b(Uint8Array):r,S={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&b?b((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&b?b((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":d,"%TypedArray%":w,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(b)try{null.error}catch(t){var A=b(b(t));S["%Error.prototype%"]=A}var k=function t(e){var n;if("%AsyncFunction%"===e)n=p("async function () {}");else if("%GeneratorFunction%"===e)n=p("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=p("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&b&&(n=b(o.prototype))}return S[e]=n,n},E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=n(743),x=n(957),O=_.call(Function.call,Array.prototype.concat),j=_.call(Function.apply,Array.prototype.splice),T=_.call(Function.call,String.prototype.replace),D=_.call(Function.call,String.prototype.slice),I=_.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,N=function(t,e){var n,r=t;if(x(E,r)&&(r="%"+(n=E[r])[0]+"%"),x(S,r)){var o=S[r];if(o===v&&(o=k(r)),void 0===o&&!e)throw new c("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new u("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new c('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,t))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=D(t,0,1),n=D(t,-1);if("%"===e&&"%"!==n)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return T(t,P,(function(t,e,n,o){r[r.length]=n?T(o,B,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=N("%"+r+"%",e),i=o.name,a=o.value,s=!1,f=o.alias;f&&(r=f[0],j(n,O([0,1],f)));for(var l=1,p=!0;l<n.length;l+=1){var y=n[l],d=D(y,0,1),g=D(y,-1);if(('"'===d||"'"===d||"`"===d||'"'===g||"'"===g||"`"===g)&&d!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==y&&p||(s=!0),x(S,i="%"+(r+="."+y)+"%"))a=S[i];else if(null!=a){if(!(y in a)){if(!e)throw new c("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&l+1>=n.length){var m=h(a,y);a=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[y]}else p=x(a,y),a=a[y];p&&!s&&(S[i]=a)}}return a}},795:(t,e,n)=>{"use strict";var r=n(453)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},229:(t,e,n)=>{t.exports=n(827)},827:(t,e,n)=>{t=n.nmd(t),function(){function e(t,r){return r?n(736)(t):t.slice?e[o(t)]:function(n,r){t(n={exports:{}}),e[o(r)]=n.exports};function o(t){return t.split("/").slice(-1).toString().replace(".js","")}}var r=t;e((function(t){String.random=function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},String.match=function(t,e){var n,r;return"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(n=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||r===e["="]&&(n=e["*"]||e[">"],t.slice(0,(n||"").length)===n||r===e["*"]&&(r!==e[">"]&&r!==e["<"]?t>=e[">"]&&t<=e["<"]:r!==e[">"]&&t>=e[">"]||r!==e["<"]&&t<=e["<"])))},String.hash=function(t,e){if("string"==typeof t){if(e=e||0,!t.length)return e;for(var n=0,r=t.length;n<r;++n)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}};var e,n,r,o,i,a,s=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,e){for(var n in t)if(s.call(t,n)&&(!e||-1==e.indexOf(n)))return!1;return!0},Object.keys=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e},n=setTimeout,r=0,o=0,i=typeof setImmediate!=""+e&&setImmediate||function(t,r){return typeof MessageChannel==""+e?n:((t=new MessageChannel).port1.onmessage=function(t){""==t.data&&r()},function(e){r=e,t.port2.postMessage("")})}(),a=n.check=n.check||typeof performance!=""+e&&performance||{now:function(){return+new Date}},n.hold=n.hold||9,n.poll=n.poll||function(t){n.hold>=a.now()-r&&o++<3333?t():i((function(){r=a.now(),t()}),o=0)},function(){var t,e=setTimeout,n=e.turn=e.turn||function(t){1==r.push(t)&&o(a)},r=n.s=[],o=e.poll,i=0,a=function(){(t=r[i++])&&t(),i!=r.length&&99!=i||(r=n.s=r.slice(i),i=0),r.length&&o(a)}}(),function(){var t,e=setTimeout,n=e.turn;(e.each=e.each||function(e,r,o,i){i=i||9,function a(s,u,c){if(u=(s=(e||[]).splice(0,i)).length){for(var f=0;f<u&&t===(c=r(s[f]));f++);if(t===c)return void n(a)}o&&o(c)}()})()}()}))(e,"./shim"),e((function(t){t.exports=function t(e,n,r){if(!e)return{to:t};var o="function"==typeof n;if(e=(this.tag||(this.tag={}))[e]||o&&(this.tag[e]={tag:e,to:t._={next:function(t){var e;(e=this.to)&&e.next(t)}}}),o){var i={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:n,the:e,on:this,as:r};return(i.back=e.last||e).to=i,e.last=i}return(e=e.to)&&void 0!==n&&e.next(n),e}}))(e,"./onto"),e((function(t){t.exports=function(t){return null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&t!=1/0&&t!=-1/0&&t==t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}}))(e,"./valid"),e((function(t){function n(){var t=+new Date;return s<t?(i=0,s=t+n.drift):s=t+(i+=1)/a+n.drift}e("./shim"),n.drift=0;var r,o=-1/0,i=0,a=999,s=o;n.is=function(t,e,n){var r=e&&t&&t._&&t._[">"]||n;if(r)return"number"==typeof(r=r[e])?r:o},n.ify=function(t,e,n,o,i){(t=t||{})._=t._||{},i&&(t._["#"]=i);var a=t._[">"]||(t._[">"]={});return r!==e&&"_"!==e&&("number"==typeof n&&(a[e]=n),r!==o&&(t[e]=o)),t},t.exports=n}))(e,"./state"),e((function(t){e("./shim"),t.exports=function(t){var e={s:{}},n=e.s;t=t||{max:999,age:9e3},e.check=function(t){return!!n[t]&&r(t)};var r=e.track=function(o){var i=n[o]||(n[o]={});return i.was=e.now=+new Date,e.to||(e.to=setTimeout(e.drop,t.age+9)),r.ed&&r.ed(o),i};return e.drop=function(r){e.to=null,e.now=+new Date;var o=Object.keys(n);console.STAT&&console.STAT(e.now,+new Date-e.now,"dup drop keys"),setTimeout.each(o,(function(o){var i=n[o];i&&(r||t.age)>e.now-i.was||delete n[o]}),0,99)},e}}))(e,"./dup"),e((function(t){e("./onto"),t.exports=function(t,e){if(this.on){var r=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var o=t["#"]||t,i=(this.tag||"")[o];if(!i)return;return e&&(i=this.on(o,e),clearTimeout(i.err),i.err=setTimeout((function(){i.off()}),r)),!0}if(o=e&&e["#"]||n(9),!t)return o;var a=this.on(o,t,e);return a.err=a.err||setTimeout((function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})}),r),o}};var n=String.random||function(){return Math.random().toString(36).slice(2)}}))(e,"./ask"),e((function(t){function n(t){return t instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:t}):new n(t)}n.is=function(t){return t instanceof n||t&&t._&&t===t._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},e("./shim"),n.valid=e("./valid"),n.state=e("./state"),n.on=e("./onto"),n.dup=e("./dup"),n.ask=e("./ask"),function(){function t(r){if(r)if(r.out!==t){var o,i=this.as,u=i.at||i,c=u.$,f=u.dup,l=r.DBG;if((o=r["#"])||(o=r["#"]=s(9)),!f.check(o)){if(f.track(o),o=r._,r._="function"==typeof o?o:function(){},r.$&&r.$===(r.$._||"").$||(r.$=c),r["@"]&&!r.put&&function(t){var e,n=t["@"]||"";if(e=n._)e.acks=(e.acks||0)+1,(e.err=t.err)&&(t["@"]=e["#"],a(e)),e.ok=t.ok||e.ok,e.stop||e.crack||(e.crack=e.match&&e.match.push((function(){h(e)}))),h(e);else{var r=(r=t.$)&&(r=r._)&&(r=r.root)&&(r=r.dup);if(!(r=r.check(n)))return;t["@"]=r["#"]||t["@"]}}(r),!u.ask(r["@"],r)){if(l&&(l.u=+new Date),r.put)return void e(r);r.get&&n.on.get(r,c)}l&&(l.uc=+new Date),this.to.next(r),l&&(l.ua=+new Date),r.nts||r.NTS||(r.out=t,u.on("out",r),l&&(l.ue=+new Date))}}else this.to.next(r)}function e(e){if(e){var n=e._||"",i=n.root=((n.$=e.$||"")._||"").root;if(e["@"]&&n.faith&&!n.miss)return e.out=t,void i.on("out",e);n.latch=i.hatch,n.match=i.hatch=[];var s=e.put,f=n.DBG=e.DBG,l=+new Date;if(y=y||l,!s["#"]||!s["."]){f&&(f.p=l),n["#"]=e["#"],n.msg=e,n.all=0,n.stun=1;var p=Object.keys(s);console.STAT&&console.STAT(l,((f||n).pk=+new Date)-l,"put sort");var h,m,b,v,S,A,k,E=0;!function t(i){if(h!=E){if(h=E,!(b=p[E]))return console.STAT&&console.STAT(l,((f||n).pd=+new Date)-l,"put"),void a(n);(v=s[b])?(k=v._)?b!==k["#"]?A=d+g(b)+"soul not same.":(S=k[">"])||(A=d+g(b)+"no state."):A=d+g(b)+"no meta.":A=d+g(b)+"no node.",m=Object.keys(v||{})}if(A)return e.err=n.err=A,void a(n);var y,_=0;for(i=i||0;i++<9&&(y=m[_++]);)if("_"!==y){var x=v[y],O=S[y];if(o===O){A=d+g(y)+"on"+g(b)+"no state.";break}if(!c(x)){A=d+g(y)+"on"+g(b)+"bad "+typeof x+g(x);break}r(x,y,b,O,e),++w}(m=m.slice(_)).length?u(t):(++E,m=null,t(i))}()}}}function r(t,e,n,o,i){var a,s=i._||"",u=s.root,c=u.graph,l=c[n]||p,h=f(l,e,1),y=l[e],d=s.DBG;(a=console.STAT)&&(c[n]&&y||(a.has=(a.has||0)+1));var g=v();if(o>g)return setTimeout((function(){r(t,e,n,o,i)}),(a=o-g)>b?b:a),void(console.STAT&&console.STAT((d||s).Hf=+new Date,a,"future"));if(!(o<h)&&(s.faith||o!==h||!(t===y||m(t)<=m(y))||s.miss)){s.stun++;var w=i["#"]+s.all++,S={toString:function(){return w},_:s};S.toJSON=S.toString,u.dup.track(S)["#"]=i["#"],d&&(d.ph=d.ph||+new Date),u.on("put",{"#":S,"@":i["@"],put:{"#":n,".":e,":":t,">":o},ok:i.ok,_:s})}}function i(t){var e;(e=(t._||"").DBG)&&(e.pa=+new Date,e.pm=e.pm||+new Date);var n,r=this.as,o=r.graph,i=t._,s=t.put,u=s["#"],c=s["."],f=s[":"],p=s[">"];t["#"],(n=i.msg)&&(n=n.put)&&(n=n[u])&&l(n,c,p,f,u),o[u]=l(o[u],c,p,f,u),(n=(r.next||"")[u])&&n.on("in",t),a(i),this.to.next(t)}function a(e,n){var r;if(!e.stop&&(e.err||!(0<--e.stun))&&(e.stop=1,r=e.root)){var o=e.match;o.end=1,o===r.hatch&&(!(o=e.latch)||o.end?delete r.hatch:r.hatch=o),e.hatch&&e.hatch(),setTimeout.each(e.match,(function(t){t&&t()})),!(n=e.msg)||e.err||n.err||(n.out=t,e.root.on("out",n),S())}}function h(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?o:t.ok||{"":1}}))}n.create=function(e){e.root=e.root||e,e.graph=e.graph||{},e.on=e.on||n.on,e.ask=e.ask||n.ask,e.dup=e.dup||n.dup();var r=e.$.opt(e.opt);return e.once||(e.on("in",t,e),e.on("out",t,e),e.on("put",i,e),n.on("create",e),e.on("create",e)),e.once=1,r},n.on.put=e;var y,d="Error: Invalid graph!",g=function(t){return" '"+(""+t).slice(0,9)+"...' "},m=JSON.stringify,b=2147483647,v=n.state,w=0,S=function(){w>999&&w/-(y-(y=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),S=function(){w=0})}}(),function(){function t(t,e){var n=+new Date,r=t._||{},i=r.DBG=t.DBG,a=t["#"],u=s(9),c=Object.keys(e||"").sort(),p=((e||"")._||"")["#"],h=(c.length,t.$._.root),y=e===h.graph[p];console.STAT&&console.STAT(n,((i||r).gk=+new Date)-n,"got keys"),e&&function t(){n=+new Date;for(var r,d,g,m=0,b={};m<9&&(r=c[m++]);)l(b,r,f(e,r),e[r],p);c=c.slice(m),(d={})[p]=b,b=d,y&&((g=function(){}).ram=g.faith=!0),d=c.length,console.STAT&&console.STAT(n,-(n-(n=+new Date)),"got copied some"),i&&(i.ga=+new Date),h.on("in",{"@":a,"#":u,put:b,"%":d?u=s(9):o,$:h.$,_:g,DBG:i,FOO:1}),console.STAT&&console.STAT(n,+new Date-n,"got in"),d&&setTimeout.turn(t)}(),e||h.on("in",{"@":t["#"]})}n.on.get=function(e,n){var r=n._,i=e.get,a=i["#"],s=r.graph[a],u=i["."],c=(r.next||(r.next={}))[a],p=(e._||{}).DBG=e.DBG;if(p&&(p.g=+new Date),!s)return r.on("get",e);if(u){if(("string"!=typeof u||o===s[u])&&!((c||"").next||"")[u])return void r.on("get",e);s=l({},u,f(s,u),s[u],a)}s&&t(e,s),r.on("get",e)},n.on.get.ack=t}(),n.chain.opt=function(t){t=t||{};var e=this._,r=t.peers||t;return Object.plain(t)||(t={}),Object.plain(e.opt)||(e.opt=t),"string"==typeof r&&(r=[r]),Object.plain(e.opt.peers)||(e.opt.peers={}),r instanceof Array&&(t.peers={},r.forEach((function(n){var r={};r.id=r.url=n,t.peers[n]=e.opt.peers[n]=e.opt.peers[n]||r}))),a(t,(function t(e){var n=this[e];this&&this.hasOwnProperty(e)||"string"==typeof n||Object.empty(n)?this[e]=n:(!n||n.constructor===Object||n instanceof Array)&&a(n,t)})),e.opt.from=t,n.on("opt",e),e.opt.uuid=e.opt.uuid||function(t){return n.state().toString(36).replace(".","")+String.random(t||12)},this};var o,i,a=function(t,e){Object.keys(t).forEach(e,t)},s=String.random,u=setTimeout.turn,c=n.valid,f=n.state.is,l=n.state.ify,p={};n.log=function(){return!n.log.off&&i.log.apply(i,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(t,e,r){return(r=n.log.once)[t]=r[t]||0,r[t]++||n.log(e)},"undefined"!=typeof window&&((window.GUN=window.Gun=n).window=window);try{void 0!==r&&(r.exports=n)}catch(t){}t.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(i=console).only=function(t,e){return i.only.i&&t===i.only.i&&i.only.i++&&(i.log.apply(i,arguments)||e)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")}))(e,"./root"),e((function(t){e("./root").chain.back=function(t,e){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var o=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var i=0,a=t.length,s=o;i<a;i++)s=(s||r)[t[i]];return n!==s?e?this:s:(s=o.back)?s.$.back(t,e):void 0}if("function"==typeof t){var u;for(s={back:o};(s=s.back)&&n===(u=t(s,e)););return u}return"number"==typeof t?(o.back||o).$.back(t-1):this};var n,r={}}))(e,"./back"),e((function(t){var n=e("./root");function r(t,e){if(e=e||this.as||t.$._,(!t.$$||this===n.on)&&t.put&&!e.soul){var r=t.put||"",o=r["="]||r[":"],i=e.root,a=i.$.get(r["#"]).get(r["."])._;if("string"==typeof(o=c(o))){if(!(a.echo||(a.echo={}))[e.id]||(i.pass||"")[e.id]){if(s=i.pass){if(s[o+e.id])return;s[o+e.id]=1}(a.echo||(a.echo={}))[e.id]=e,e.has&&(e.link=o);var s,u=i.$.get(a.link=o)._;(u.echo||(u.echo={}))[a.id]=a,((s=e.ask||"")[""]||e.lex)&&u.on("out",{get:{"#":o}}),setTimeout.each(Object.keys(s),(function(t,e){t&&(e=s[t])&&e.on("out",{get:{"#":o,".":t}})}),0,99)}}else this===n.on&&((a.echo||(a.echo={}))[e.id]=e)}}function o(t,e){var n,r,i=t.put||"",s=a!==i["="]?i["="]:i[":"],u=e.root;if(a===s){if(e.soul&&a!==e.put)return;if(r=(t.$$||t.$||"")._||"",t["@"]&&(a!==r.put||a!==e.put))return;return(n=e.link||t.linked)&&delete(u.$.get(n)._.echo||"")[e.id],e.has&&(e.link=null),e.put=a,void setTimeout.each(Object.keys(e.next||""),(function(t,r){(r=e.next[t])&&(n&&delete(u.$.get(n).get(t)._.echo||"")[r.id],r.on("in",{get:t,put:a,$:r.$}))}),0,99)}e.soul||t.$$||(n=c(s),r=t.$._||"",(n!==r.link&&(!e.has||r.link)||(u.pass||"")[e.id]&&"string"!=typeof n)&&(delete(r.echo||"")[e.id],o({get:e.get,put:a,$:t.$,linked:t.linked=t.linked||r.link},e)))}function i(t,e){var r=this.as,o=r.$._,i=(o.root,r.get||""),s=(t.put||"")[i["#"]]||"";if(!t.put||"string"==typeof i["."]&&a===s[i["."]]){if(a!==o.put)return;if(!o.soul&&!o.has)return;return o.ack=(o.ack||0)+1,void o.on("in",{get:o.get,put:o.put=a,$:o.$,"@":t["@"]})}(t._||{}).miss=1,n.on.put(t)}n.chain.chain=function(t){var e,r=this,o=r._,i=new(t||r).constructor(r),a=i._;return a.root=e=o.root,a.id=++e.once,a.back=r._,a.on=n.on,a.on("in",n.on.in,a),a.on("out",n.on.out,a),i},n.on.out=function(t){var e,n,r=this.as,o=r.back,s=r.root;if(t.$||(t.$=r.$),this.to.next(t),!r.err){if(e=t.get){if(s.pass&&(s.pass[r.id]=r),r.lex&&Object.keys(r.lex).forEach((function(t){n[t]=r.lex[t]}),n=t.get=t.get||{}),e["#"]||r.soul){if(e["#"]=e["#"]||r.soul,t["#"]||(t["#"]=u(9)),o=s.$.get(e["#"])._,e=e["."]){if(f(o.put,e)&&(n=o.ask&&o.ask[e],(o.ask||(o.ask={}))[e]=o.$.get(e)._,o.on("in",{get:e,put:{"#":o.soul,".":e,":":o.put[e],">":p(s.graph[o.soul],e)}}),n))return}else{if(n=o.ask&&o.ask[""],(o.ask||(o.ask={}))[""]=o,a!==o.put&&(o.on("in",o),n))return;t.$=o.$}return s.ask(i,t),s.on("in",t)}if(e["."])return r.get?(t={get:{".":r.get},$:r.$},(o.ask||(o.ask={}))[r.get]=t.$._,o.on("out",t)):(t={get:r.lex?t.get:{},$:r.$},o.on("out",t));if((r.ask||(r.ask={}))[""]=r,r.get)return e["."]=r.get,(o.ask||(o.ask={}))[r.get]=t.$._,o.on("out",t)}return o.on("out",t)}r.on("in",{put:r.put=a,$:r.$})},n.on.in=function(t,e){var n,i=(e=e||this.as).root,u=t.$||(t.$=e.$),f=(u||"")._||s,l=t.put||"",y=l["#"],d=l["."],g=a!==l["="]?l["="]:l[":"],m=l[">"]||-1/0;if(a!==t.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"]))return c(l)?void e.on("in",{$:f.back.$,put:{"#":y=f.back.soul,".":d=f.has||f.get,"=":l,">":p(f.back.put,d)},via:t}):(y=((l||"")._||"")["#"])?(u=e.root.$.get(y),setTimeout.each(Object.keys(l).sort(),(function(n){"_"!=n&&a!==(m=p(l,n))&&e.on("in",{$:u,put:{"#":y,".":n,"=":l[n],">":m},VIA:t})}))):void console.log("chain not yet supported for",l,"...",t,e);(t.seen||"")[e.id]||((t.seen||(t.seen=function(){}))[e.id]=e,e!==f&&(Object.keys(t).forEach((function(e){l[e]=t[e]}),l={}),l.get=e.get||l.get,e.soul||e.has?f.soul&&(l.$=e.$,l.$$=l.$$||f.$):l.$$$=l.$$$||e.$,t=l),o(t,e),(e.soul||t.$$)&&m>=p(i.graph[y],d)&&((l=i.$.get(y)._).put=h(l.put,d,m,g,y)),!f.soul&&m>=p(i.graph[y],d)&&(n=(i.$.get(y)._.next||"")[d])&&(n.put=g,"string"==typeof(l=c(g))&&(n.put=i.$.get(l)._.put||g)),this.to&&this.to.next(t),e.any&&setTimeout.each(Object.keys(e.any),(function(n){(n=e.any[n])&&n(t)}),0,99),e.echo&&setTimeout.each(Object.keys(e.echo),(function(n){(n=e.echo[n])&&n.on("in",t)}),0,99),((t.$$||"")._||f).soul&&(n=e.next)&&(n=n[d])&&(l={},Object.keys(t).forEach((function(e){l[e]=t[e]})),l.$=(t.$$||t.$).get(l.get=d),delete l.$$,delete l.$$$,n.on("in",l)),r(t,e))},n.on.link=r,n.on.unlink=o;var a,s={},u=String.random,c=n.valid,f=function(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)},l=n.state,p=l.is,h=l.ify}))(e,"./chain"),e((function(t){var n=e("./root");function r(t){var e=this.at||this.on;if(!t||e.soul||e.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var n;if(e.map,(n=this.seen||(this.seen={}))[t])return!0;n[t]=!0}}n.chain.get=function(t,e,s){var u,c;if("string"==typeof t){if(0==t.length)return(u=this.chain())._.err={err:n.log("0 length key!",t)},e&&e.call(u,u._.err),u;(u=((l=this._).next||i)[t])||(u=t&&function(t,e){var n=e._,r=n.next,o=e.chain()._;return r||(r=n.next={}),r[o.get=t]=o,e===n.root.$?o.soul=t:(n.soul||n.has)&&(o.has=t),o}(t,this)),u=u&&u.$}else{if("function"==typeof t){if(!0===e)return function(t,e,r,i){var a,s=t._,u=0;(a=s.soul||s.link)?e(a,i,s):s.jam?s.jam.push([e,i]):(s.jam=[[e,i]],t.get((function(t,e){if(!(o===t.put&&!s.root.opt.super&&(a=Object.keys(s.root.opt.peers).length)&&++u<=a)){e.rid(t);var r,i=(i=t.$)&&i._||{},c=0;for(a=s.jam,delete s.jam;r=a[c++];){var f=r[0];r=r[1],f&&f(i.link||i.soul||n.valid(t.put)||((t.put||{})._||{})["#"],r,t,e)}}}),{out:{get:{".":!0}}}))}(this,t,0,s),this;var f,l=(u=this)._,p=e||{},h=l.root;p.at=l,p.ok=t;var y={};function d(t,e,r){if(!d.stun&&(!(i=h.pass)||i[f])){var i,a=t.$._,s=(t.$$||"")._,u=(s||a).put,c=!a.has&&!a.soul,g={};if((c||o===u)&&(u=o===((i=t.put)||"")["="]?o===(i||"")[":"]?i:i[":"]:i["="]),"string"==typeof(i=n.valid(u))&&(u=o===(i=h.$.get(i)._.put)?p.not?o:u:i),!p.not||o!==u){if(o===p.stun){if((i=h.stun)&&i.on&&(l.$.back((function(t){if(i.on(""+t.id,g={}),(g.run||0)<d.id)return g})),!g.run&&i.on(""+a.id,g={}),!g.run&&s&&i.on(""+s.id,g={}),d.id>g.run&&(g.stun&&!g.stun.end||(g.stun=i.on("stun"),g.stun=g.stun&&g.stun.last),g.stun&&!g.stun.end)))return void((g.stun.add||(g.stun.add={}))[f]=function(){d(t,e,1)});if(o===u&&(r=0),(i=h.hatch)&&!i.end&&o===p.hatch&&!r){if(y[a.$._.id])return;return y[a.$._.id]=1,void i.push((function(){d(t,e,1)}))}y={}}if(h.pass){if(h.pass[f+a.id])return;h.pass[f+a.id]=1}p.on?p.ok.call(a.$,u,a.get,t,e||d):p.v2020?p.ok(t,e||d):(Object.keys(t).forEach((function(e){i[e]=t[e]}),i={}),(t=i).put=u,p.ok.call(p.as,t,e||d))}}}return d.at=l,(l.any||(l.any={}))[f=String.random(7)]=d,d.off=function(){d.stun=1,l.any&&delete l.any[f]},d.rid=r,d.id=p.run||++h.once,c=h.pass,(h.pass={})[f]=1,p.out=p.out||{get:{}},l.on("out",p.out),h.pass=c,u}if("number"==typeof t)return this.get(""+t,e,s);if("string"==typeof(c=a(t)))return this.get(c,e,s);(c=this.get.next)&&(u=c(this,t))}return u?(e&&"function"==typeof e&&u.get(e,s),u):((u=this.chain())._.err={err:n.log("Invalid get request!",t)},e&&e.call(u,u._.err),u)};var o,i={},a=n.valid}))(e,"./get"),e((function(t){var n=e("./root");function r(t,e){if(e){e=(e._||"").id||e;var r,o=t.root.stun||(t.root.stun={on:n.on}),i={};t.stun||(t.stun=o.on("stun",(function(){}))),(r=o.on(""+e))&&r.the.last.next(i),i.run>=t.run||o.on(""+e,(function(e){if(t.stun.end)return this.off(),void this.to.next(e);e.run=e.run||t.run,e.stun=e.stun||t.stun}))}}function o(t){if(t.err)o.end(t.stun,t.root);else if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var e,r=t.$.back(-1)._,i=r.root,a=r.ask((function(e){i.on("ack",e),e.err&&!e.lack&&n.log(e),++s>(t.acks||0)&&this.off(),t.ack&&t.ack(e,this)}),t.opt),s=0,u=t.stun;(e=function(){u&&(o.end(u,i),setTimeout.each(Object.keys(u=u.add||""),(function(t){(t=u[t])&&t()})))}).hatch=e,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":a,_:e})}}n.chain.put=function(t,e,a){var f=this,l=f._,p=l.root;(a=a||{}).root=l.root,a.run||(a.run=p.once),r(a,l.id),a.ack=a.ack||e,a.via=a.via||f,a.data=a.data||t,a.soul||(a.soul=l.soul||"string"==typeof e&&e);var h=a.state=a.state||n.state();return"function"==typeof t?(t((function(t){a.data=t,f.put(i,i,a)})),f):a.soul?(a.$=p.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||o,function t(){var e,i,s,f,l,p=a.todo,y=p.pop(),d=y.it;if(y.ref&&y.ref._.id,r(a,y.ref),(f=y.todo)&&(d=d[i=f.pop()],f.length&&p.push(y)),i&&(p.path||(p.path=[])).push(i),!(e=u(d))&&!(l=n.is(d))){if(!Object.plain(d))return void o.err(a,"Invalid data: "+function(t,e){return t&&(e=t.constructor)&&e.name||typeof t}(d)+" at "+(a.via.back((function(t){t.get&&f.push(t.get)}),f=[])||f.join("."))+"."+(p.path||[]).join("."));for(var g=a.seen||(a.seen=[]),m=g.length;m--;)if(d===(f=g[m]).it){e=d=f.link;break}}if(i&&e)y.node=c(y.node,i,h,d);else{if(!a.seen)return void o.err(a,"Data at root of graph must be a node (an object).");a.seen.push(s={it:d,link:{},todo:l?[]:Object.keys(d).sort().reverse(),path:(p.path||[]).slice(),up:y}),y.node=c(y.node,i,h,s.link),!l&&s.todo.length&&p.push(s);var b=a.seen.length;function v(t,e){var n=s.link["#"];e&&(e.off(),e.rid(t));var o=n||t.soul||(f=(t.$$||t.$)._||"").soul||f.link||((f=f.put||"")._||"")["#"]||f["#"]||((f=t.put||"")&&t.$$?f["#"]:(f["="]||f[":"]||"")["#"]);!n&&r(a,t.$),o||y.link["#"]?(o||(o=[],(t.$$||t.$).back((function(t){if(f=t.soul||t.link)return o.push(f);o.push(t.get)})),o=o.reverse().join("/")),s.link["#"]=o,!l&&(((a.graph||(a.graph={}))[o]=s.node||(s.node={_:{}}))._["#"]=o),delete a.wait[b],s.wait&&setTimeout.each(s.wait,(function(t){t&&t()})),a.ran(a)):(y.wait||(y.wait=[])).push((function(){v(t,e)}))}(a.wait||(a.wait={}))[b]="",f=(s.ref=l?d:i?y.ref.get(i):y.ref)._,(f=d&&(d._||"")["#"]||f.soul||f.link)?v({soul:f}):s.ref.get(v,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!p.length)return a.ran(a);a.turn(t)}(),f):(function(t){var e,n=t.via._;t.via=t.via.back((function(n){if(n.soul||!n.get)return n.$;e=t.data,(t.data={})[n.get]=e})),t.via&&t.via._.soul||(t.via=n.root.$.get(((t.data||"")._||"")["#"]||n.$.back("opt.uuid")())),t.via.put(t.data,t.ack,t)}(a),f)},o.end=function(t,e){t.end=a,t.the.to===t&&t===t.the.last&&delete e.stun,t.off()},o.err=function(t,e){(t.ack||a).call(t,t.out={err:t.err=n.log(e)}),t.ran(t)};var i,a=function(){},s=setTimeout.turn,u=n.valid,c=n.state.ify}))(e,"./put"),e((function(t){var n=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),t.exports=n}))(e,"./index"),e((function(t){var n,r=e("./index");r.chain.on=function(t,e,n,r){var o,i=this,a=i._;if(a.root,"string"==typeof t)return e?(o=a.on(t,e,n||a,r),n&&n.$&&(n.subs||(n.subs=[])).push(o),i):a.on(t);var s=e;return(s=!0===s?{change:!0}:s||{}).not=1,s.on=1,i.get(t,s),i},r.chain.once=function(t,e){if(e=e||{},!t)return function(t,e,n){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(n=t.chain())._.nix=t.once((function(t,e){n._.on("in",this._)})),n._.lex=t._.lex,n}(this);var o,i=this,a=i._,s=a.root,u=(a.put,String.random(7));return i.get((function(i,c,f,l){var p=this,h=p._,y=h.one||(h.one={});function d(g){h.has||h.soul||(h={put:i,get:c}),n===(o=h.put)&&(o=((f.$$||"")._||"").put),"string"!=typeof r.valid(o)||(o=s.$.get(o)._.put)!==n||g?l.stun||""!==y[u]&&(y[u]="",(a.soul||a.has)&&l.off(),t.call(p,o,h.get),clearTimeout(y[u])):y[u]=setTimeout((function(){d(1)}),e.wait||99)}l.stun||""!==y[u]&&(!0!==(o=r.valid(i))?"string"!=typeof o&&(clearTimeout((a.one||"")[u]),clearTimeout(y[u]),y[u]=setTimeout(d,e.wait||99)):d())}),{on:1}),i},r.chain.off=function(){var t,e=this._,n=e.back;if(n)return e.ack=0,(t=n.next)&&t[e.get]&&delete t[e.get],(t=n.any)&&(delete n.any,n.any={}),(t=n.ask)&&delete t[e.get],(t=n.put)&&delete t[e.get],(t=e.soul)&&delete n.root.graph[t],(t=e.map)&&Object.keys(t).forEach((function(e,r){(r=t[e]).link&&n.root.$.get(r.link).off()})),(t=e.next)&&Object.keys(t).forEach((function(e,n){t[e].$.off()})),e.on("off",{}),this}}))(e,"./on"),e((function(t){var n=e("./index"),r=n.chain.get.next;function o(t){this.to.next(t);var e,r=this.as,o=t.$._,i=t.put;(o.soul||t.$$)&&((e=r.lex)&&!String.match(t.get||(i||"")["."],e["."]||e["#"]||e)||n.on.link(t,r))}n.chain.get.next=function(t,e){var n;return Object.plain(e)?(n=((n=e["#"])||"")["="]||n)?t.get(n):((n=t.chain()._).lex=e,t.on("in",(function(t){String.match(t.get||(t.put||"")["."],e["."]||e["#"]||e)&&n.on("in",t),this.to.next(t)})),n.$):(r||a)(t,e)},n.chain.map=function(t,e,r){var s,u,c=this,f=c._;return Object.plain(t)&&(s=t["."]?t:{".":t},t=i),t?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=c.chain(),c.map().on((function(e,r,o,s){var c=(t||a).call(this,e,r,o,s);if(i!==c){if(e===c)return u._.on("in",o);if(n.is(c))return u._.on("in",c._);var f={};Object.keys(o.put).forEach((function(t){f[t]=o.put[t]}),f),f["="]=c,u._.on("in",{get:r,put:f})}})),u):((u=f.each)||((f.each=u=c.chain())._.lex=s||u._.lex||f.lex,u._.nix=c.back("nix"),c.on("in",o,u._)),u)};var i,a=function(){}}))(e,"./map"),e((function(t){var n=e("./index");n.chain.set=function(t,e,r){var o,i,a=this,s=a.back(-1);return e=e||function(){},(r=r||{}).item=r.item||t,(o=((t||"")._||"")["#"])&&((t={})["#"]=o),"string"==typeof(i=n.valid(t))?a.get(o=i).put(t,e,r):n.is(t)?(a.put((function(r){t.get((function(t,o,s){if(!t)return e.call(a,{err:n.log('Only a node can be linked! Not "'+s.put+'"!')});(i={})[t]={"#":t},r(i)}),!0)})),t):(Object.plain(t)&&(t=s.get(o=a.back("opt.uuid")()).put(t)),a.get(o||s.back("opt.uuid")(7)).put(t,e,r))}}))(e,"./set"),e((function(t){e("./shim");var n,r=function(){},o=JSON.parseAsync||function(t,e,n){var r=+new Date;try{e(void 0,JSON.parse(t,n),i.sucks(+new Date-r))}catch(t){e(t)}},i=JSON.stringifyAsync||function(t,e,n,r){var o=+new Date;try{e(void 0,JSON.stringify(t,n,r),i.sucks(+new Date-o))}catch(t){e(t)}};i.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),i.sucks=r)};try{t.exports=function(t){var e=function(){},r=t.opt||{};r.log=r.log||console.log,r.gap=r.gap||r.wait||0,r.max=r.max||.3*(r.memory?999*r.memory*999:3e8),r.pack=r.pack||.01*r.max*.01,r.puff=r.puff||9;var a=setTimeout.turn||setTimeout,s=t.dup,u=s.check,c=s.track,f=(new Date,e.hear=function(t,n){if(t){if(r.max<=t.length)return e.say({dam:"!",err:"Message too big!"},n);e===this&&(f.d+=t.length||0,++f.c);var i,s=n.SH=+new Date,u=t[0];return"["===u?(o(t,(function(t,o){if(t||!o)return e.say({dam:"!",err:"DAM JSON parse error."},n);console.STAT&&console.STAT(+new Date,o.length,"# on hear batch");var i=r.puff;!function t(){for(var r,s=+new Date,u=0;u<i&&(r=o[u++]);)e.hear(r,n);o=o.slice(u),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(n),o.length&&a(t,0)}()})),void(t="")):"{"===u||(t["#"]||Object.plain(t))&&(i=t)?i?f.one(i,n,s):void o(t,(function(t,r){if(t||!r)return e.say({dam:"!",err:"DAM JSON parse error."},n);f.one(r,n,s)})):void 0}});function l(t){var e=t.batch,n="string"==typeof e;if(n&&(e+="]"),t.batch=t.tail=null,e&&!(n?3>e.length:!e.length)){if(!n)try{e=1===e.length?e[0]:JSON.stringify(e)}catch(t){return r.log("DAM JSON stringify error",t)}e&&p(e,t)}}function p(t,n){try{var r=n.wire;n.say?n.say(t):r.send&&r.send(t),e.say.d+=t.length||0,++e.say.c}catch(e){(n.queue=n.queue||[]).push(t)}}f.one=function(n,r,o){var i,a,f,l,p;if(n.DBG&&(n.DBG=p={DBG:n.DBG}),p&&(p.h=o),p&&(p.hp=+new Date),(i=n["#"])||(i=n["#"]=String.random(9)),!((f=u(i))||(a=n["##"])&&(f=n["@"]||n.get&&i)&&s.check(l=f+a))){if((n._=function(){}).via=e.leap=r,(f=n["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach((function(t){this[t]=1}),n._.yo={}),f=n.dam)return(f=e.hear[f])&&f(n,r,t),void c(i);(f=n.ok)&&(n._.near=f["/"]),o=+new Date,p&&(p.is=o),r.SI=i,c.ed=function(t){i===t&&(c.ed=0,(t=s.s[i])&&(t.via=r,n.get&&(t.it=n)))},t.on("in",e.last=n),p&&(p.hd=+new Date),console.STAT&&console.STAT(o,+new Date-o,n.get?"msg get":n.put?"msg put":"msg"),c(i),l&&c(l),e.leap=e.last=null}},f.c=f.d=0,function(){var t,o=0;function f(t,e){var n;return e instanceof Object?(Object.keys(e).sort().forEach(h,{to:n={},on:e}),n):e}function h(t){this.to[t]=this.on[t]}e.hash=function(t,n){var r,o,s,u=+new Date;i(t.put,(function i(c,f){var l=(o||(o=s=f||"")).slice(0,32768);r=String.hash(l,r),(o=o.slice(32768))?a(i,0):(console.STAT&&console.STAT(u,+new Date-u,"say json+hash"),t._.$put=s,t["##"]=r,e.say(t,n),delete t._.$put)}),f)},(e.say=function(i,u){var f;if((f=this)&&(f=f.to)&&f.next&&f.next(i),!i)return!1;var h,y,d,g=i["@"],m=i._||(i._=function(){}),b=i.DBG,v=+new Date;if(m.y=m.y||v,u||b&&(b.y=v),(h=i["#"])||(h=i["#"]=String.random(9)),!t&&c(h),(y=i["##"])||n===i.put||m.via||!g){if(!u&&g&&(u=(f=s.s[g])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=e.last)&&g===f["#"]&&e.leap),!u&&g){if(s.s[g])return;return console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1}if(g&&!i.put&&!y&&((s.s[g]||"").it||"")["##"])return!1;if(!u&&e.way)return e.way(i);if(b&&(b.yh=+new Date),d=m.raw){if(b&&(b.yr=+new Date),!u||!u.id){if(!Object.plain(u||r.peers))return!1;v=+new Date,r.puff;var w=r.peers,S=Object.keys(u||r.peers||{});return console.STAT&&console.STAT(v,+new Date-v,"peer keys"),void function n(){var r=+new Date;t=1;var o=m.raw;m.raw=d;for(var s,f=0;f<9&&(s=(S||"")[f++]);)(s=w[s]||(u||"")[s])&&e.say(i,s);m.raw=o,t=0,S=S.slice(f),console.STAT&&console.STAT(r,+new Date-r,"say loop"),S.length&&(a(n,0),g&&c(g))}()}if(!u.wire&&e.wire&&e.wire(u),h!==u.last){if(u.last=h,u===m.via)return!1;if((f=m.yo)&&(f[u.url]||f[u.pid]||f[u.id]))return!1;if(console.STAT&&console.STAT(v,((b||m).yp=+new Date)-(m.y||v),"say prep"),!t&&g&&c(g),u.batch){if(u.tail=(f=u.tail||0)+d.length,u.tail<=r.pack)return void(u.batch+=(f?",":"")+d);l(u)}u.batch="[";var A=+new Date;setTimeout((function(){console.STAT&&console.STAT(A,+new Date-A,"0ms TO"),l(u)}),r.gap),p(d,u),console.STAT&&g===u.SI&&console.STAT(v,+new Date-u.SH,"say ack")}}else e.raw(i,u)}else e.hash(i,u)}).c=e.say.d=0,e.raw=function(t,o){if(!t)return"";var a,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],p=t["@"];if(l&&p){if(!f.via&&u(p+l))return!1;if(c=(s.s[p]||"").it){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam&&!t["@"]){var h=0,y=[];for(var d in c=r.peers){var g=c[d];if(y.push(g.url||g.pid||g.id),++h>6)break}h>1&&(t["><"]=y.join())}if(t.put&&(c=t.ok)&&(t.ok={"@":(c["@"]||1)-1,"/":c["/"]==t._.near?e.near:c["/"]}),a=f.$put)return c={},Object.keys(t).forEach((function(e){c[e]=t[e]})),c.put=":])([:",void i(c,(function(t,e){if(!t){var r=+new Date;c=e.indexOf('"put":":])([:"'),m(n,e=e.slice(0,c+6)+a+e.slice(c+14)),console.STAT&&console.STAT(r,+new Date-r,"say slice")}}));function m(n,r){n||(f.raw=r,e.say(t,o))}i(t,m)}}(),e.near=0,e.hi=function(n){var o;n.wire?(n.id?r.peers[n.url||n.id]=n:(o=n.id=n.id||n.url||String.random(9),e.say({dam:"?",pid:t.opt.pid},r.peers[o]=n),delete s.s[n.last]),n.met||(e.near++,n.met=+new Date,t.on("hi",n)),o=n.queue,n.queue=[],setTimeout.each(o||[],(function(t){p(t,n)}),0,9)):e.wire(n.length&&{url:n,id:n}||n)},e.bye=function(n){n.met&&--e.near,delete n.met,t.on("bye",n);var r=+new Date;r-=n.met||r,e.bye.time=((e.bye.time||r)+r)/2},e.hear["!"]=function(t,e){r.log("Error:",t.err)},e.hear["?"]=function(t,n){t.pid&&(n.pid||(n.pid=t.pid),t["@"])||(e.say({dam:"?",pid:r.pid,"@":t["#"]},n),delete s.s[n.last])},e.hear.mob=function(t,n){if(t.peers){var r=Object.keys(t.peers),o=r[Math.random()*r.length|0];o&&(e.bye(n),e.hi(o))}},t.on("create",(function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",e.say)})),t.on("bye",(function(t,e){t=r.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(e=t.wire)&&e.close&&e.close(),delete r.peers[t.id],t.wire=null}));var h={};return t.on("bye",(function(t,n){this.to.next(t),(n=console.STAT)&&(n.peers=e.near),(n=t.url)&&(h[n]=!0,setTimeout((function(){delete h[n]}),r.lack||9e3))})),t.on("hi",(function(n,o){if(this.to.next(n),(o=console.STAT)&&(o.peers=e.near),!r.super){var i=Object.keys(t.next||"");i.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(i,(function(o){var i=t.next[o];r.super||(i.ask||"")[""]?e.say({get:{"#":o}},n):setTimeout.each(Object.keys(i.ask||""),(function(r){r&&e.say({"##":String.hash((t.graph[o]||"")[r]),get:{"#":o,".":r}},n)}))}))}})),e}}catch(t){}}))(e,"./mesh"),e((function(t){var n=e("./index");n.Mesh=e("./mesh"),n.on("opt",(function(t){if(this.to.next(t),!t.once){var e=t.opt;if(!1!==e.WebSocket){var r=n.window||{},o=e.WebSocket||r.WebSocket||r.webkitWebSocket||r.mozWebSocket;if(o){e.WebSocket=o;var i=e.mesh=e.mesh||n.Mesh(t);i.wire||e.wire,i.wire=e.wire=u,setTimeout((function(){!e.super&&t.on("out",{dam:"hi"})}),1);var a=1998,s=""+void 0!=typeof document&&document}}}function u(t){try{if(!t||!t.url)return r&&r(t);var n=t.url.replace(/^http/,"ws"),r=t.wire=new e.WebSocket(n);return r.onclose=function(){c(t),e.mesh.bye(t)},r.onerror=function(e){c(t)},r.onopen=function(){e.mesh.hi(t)},r.onmessage=function(n){n&&e.mesh.hear(n.data||n,t)},r}catch(n){e.mesh.bye(t)}}function c(t){clearTimeout(t.defer),e.peers[t.url]&&(s&&t.retry<=0||(t.retry=(t.retry||e.retry+1||60)-(-t.tried+(t.tried=+new Date)<4*a?1:0),t.defer=setTimeout((function e(){if(s&&s.hidden)return setTimeout(e,a);u(t)}),a)))}}))}))(e,"./websocket"),e((function(t){if("undefined"!=typeof Gun){var e;try{e=(Gun.window||function(){}).localStorage}catch(t){}e||(Gun.log("Warning: No localStorage exists to persist data to!"),e={setItem:function(t,e){this[t]=e},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}}),JSON.parseAsync;var n=JSON.stringifyAsync||function(t,e,n,r){try{e(void 0,JSON.stringify(t,n,r))}catch(t){e(t)}};Gun.on("create",(function t(r){this.to.next(r);var o,i,a,s,u=r.opt,c=(r.graph,[]);if(!1!==u.localStorage){u.prefix=u.file||"gun/";try{o=t[u.prefix]=t[u.prefix]||JSON.parse(a=e.getItem(u.prefix))||{}}catch(e){o=t[u.prefix]={}}a=(a||"").length,r.on("get",(function(t){this.to.next(t);var e,n,r,i=t.get;i&&(e=i["#"])&&((n=o[e]||void 0)&&(r=i["."])&&!Object.plain(r)&&(n=Gun.state.ify({},r,Gun.state.is(n,r),n[r],e)),Gun.on.get.ack(t,n))})),r.on("put",(function(t){this.to.next(t);var e=t.put,n=e["#"],u=e["."],l=t["#"],p=t.ok||"";o[n]=Gun.state.ify(o[n],u,e[">"],e[":"],n),s&&a>4999880?r.on("in",{"@":l,err:"localStorage max!"}):(t["@"]||t._.via&&!(Math.random()<p["@"]/p["/"])||c.push(l),i||(i=setTimeout(f,9+a/333)))}))}function f(){if(c.length||!((setTimeout.turn||"").s||"").length){var t=c;clearTimeout(i),i=!1,c=[],n(o,(function(n,i){try{!n&&e.setItem(u.prefix,i)}catch(t){n=s=t||"localStorage failure"}n&&(Gun.log(n+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),r.on("localStorage:error",{err:n,get:u.prefix,put:o})),a=i.length,setTimeout.each(t,(function(t){r.on("in",{"@":t,err:n,ok:0})}),0,99)}))}else setTimeout(f,99)}}))}}))(e,"./localStorage")}(),function(){if(""+A!=typeof Gun){var t=function(t){console.warn("Warning! Deprecated internal utility will break in next version:",t)},e=Gun;e.fn=e.fn||{is:function(e){return t("fn"),!!e&&"function"==typeof e}},e.bi=e.bi||{is:function(e){return t("bi"),e instanceof Boolean||"boolean"==typeof e}},e.num=e.num||{is:function(e){return t("num"),!r(e)&&(e-parseFloat(e)+1>=0||1/0===e||-1/0===e)}},e.text=e.text||{is:function(e){return t("text"),"string"==typeof e}},e.text.ify=e.text.ify||function(n){return t("text.ify"),e.text.is(n)?n:"undefined"!=typeof JSON?JSON.stringify(n):n&&n.toString?n.toString():n},e.text.random=e.text.random||function(e,n){t("text.random");var r="";for(e=e||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)r+=n.charAt(Math.floor(Math.random()*n.length)),e--;return r},e.text.match=e.text.match||function(e,n){var r,o;return t("text.match"),"string"==typeof e&&("string"==typeof n&&(n={"=":n}),e===(r=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||o===n["="]&&(r=n["*"]||n[">"]||n["<"],e.slice(0,(r||"").length)===r||o===n["*"]&&(o!==n[">"]&&o!==n["<"]?e>=n[">"]&&e<=n["<"]:o!==n[">"]&&e>=n[">"]||o!==n["<"]&&e<=n["<"])))},e.text.hash=e.text.hash||function(e,n){if(t("text.hash"),"string"==typeof e){if(n=n||0,!e.length)return n;for(var r=0,o=e.length;r<o;++r)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n}},e.list=e.list||{is:function(e){return t("list"),e instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(e){return t("list.sort"),function(t,n){return t&&n?(t=t[e])<(n=n[e])?-1:t>n?1:0:0}},e.list.map=e.list.map||function(e,n,r){return t("list.map"),a(e,n,r)},e.list.index=1,e.obj=e.boj||{is:function(e){return t("obj"),!!e&&(e instanceof Object&&e.constructor===Object||"Object"===Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1])}},e.obj.put=e.obj.put||function(e,n,r){return t("obj.put"),(e||{})[n]=r,e},e.obj.has=e.obj.has||function(e,n){return t("obj.has"),e&&Object.prototype.hasOwnProperty.call(e,n)},e.obj.del=e.obj.del||function(e,n){if(t("obj.del"),e)return e[n]=null,delete e[n],e},e.obj.as=e.obj.as||function(e,n,r,o){return t("obj.as"),e[n]=e[n]||(o===r?{}:r)},e.obj.ify=e.obj.ify||function(e){if(t("obj.ify"),o(e))return e;try{e=JSON.parse(e)}catch(t){e={}}return e},function(){function n(t,e){i(this,e)&&void 0!==this[e]||(this[e]=t)}e.obj.to=e.obj.to||function(e,r){return t("obj.to"),a(e,n,r=r||{}),r}}(),e.obj.copy=e.obj.copy||function(e){return t("obj.copy"),e?JSON.parse(JSON.stringify(e)):e},function(){function n(t,e){var n=this.n;if(!n||!(e===n||o(n)&&i(n,e)))return void 0!==e||void 0}e.obj.empty=e.obj.empty||function(e,r){return t("obj.empty"),!e||!a(e,n,{n:r})}}(),function(){function n(t,e){if(2===arguments.length)return n.r=n.r||{},void(n.r[t]=e);n.r=n.r||[],n.r.push(t)}var a,s=Object.keys;Object.keys=Object.keys||function(t){return a(t,(function(t,e,n){n(e)}))},e.obj.map=a=e.obj.map||function(a,u,c){t("obj.map");var f,l,p,h,y,d=0,g="function"==typeof u;if(n.r=f,s&&o(a)&&(h=s(a),y=!0),c=c||{},r(a)||h)for(l=(h||a).length;d<l;d++){var m=d+e.list.index;if(g){if((p=y?u.call(c,a[h[d]],h[d],n):u.call(c,a[d],m,n))!==f)return p}else if(u===a[y?h[d]:d])return h?h[d]:m}else for(d in a)if(g){if(i(a,d)&&(p=c?u.call(c,a[d],d,n):u(a[d],d,n))!==f)return p}else if(u===a[d])return d;return g?n.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(e){return t("time"),e?e instanceof Date:+(new Date).getTime()};var n=e.fn.is,r=e.list.is,o=(S=e.obj).is,i=S.has,a=S.map,s={is:function(e){return t("val.is"),e!==A&&(null===e||e!==1/0&&(!!(l(e)||c(e)||f(e))||s.link.is(e)||!1))}};s.link=s.rel={_:"#"},function(){function e(t,e){var n=this;return n.id?n.id=!1:e==u&&l(t)?void(n.id=t):n.id=!1}s.link.is=function(n){if(t("val.link.is"),n&&n[u]&&!n._&&o(n)){var r={};if(a(n,e,r),r.id)return r.id}return!1}}(),s.link.ify=function(e){return t("val.link.ify"),p({},u,e)},e.obj.has._=".";var u=s.link._,c=e.bi.is,f=e.num.is,l=e.text.is,p=(o=(S=e.obj).is,S.put);a=S.map,e.val=e.val||s;var h={_:"_",soul:function(e,n){return t("node.soul"),e&&e._&&e._[n||g]}};h.soul.ify=function(e,n){return t("node.soul.ify"),n="string"==typeof n?{soul:n}:n||{},(e=e||{})._=e._||{},e._[g]=n.soul||e._[g]||d(),e},h.soul._=s.link._,function(){function e(t,e){if(e!==h._)return!s.is(t)||void(this.cb&&this.cb.call(this.as,t,e,this.n,this.s))}h.is=function(n,r,i){var s;return t("node.is"),!!o(n)&&!!(s=h.soul(n))&&!a(n,e,{as:i,cb:r,s,n})}}(),function(){function e(t,e){var n,r=this.o;r.map?void 0===(n=r.map.call(this.as,t,""+e,r.node))?y(r.node,e):r.node&&(r.node[e]=n):s.is(t)&&(r.node[e]=t)}h.ify=function(n,r,o){return t("node.ify"),r?"string"==typeof r?r={soul:r}:"function"==typeof r&&(r={map:r}):r={},r.map&&(r.node=r.map.call(o,n,A,r.node||{})),(r.node=h.soul.ify(r.node||{},r))&&a(n,e,{o:r,as:o}),r.node}}(),o=(S=e.obj).is;var y=S.del,d=(a=S.map,e.text.random),g=h.soul._;e.node=e.node||h;var m=e.state;m.lex=function(){return t("state.lex"),m().toString(36).replace(".","")},m.to=function(e,n,r){t("state.to");var i=(e||{})[n];return o(i)&&(i=b(i)),m.ify(r,n,m.is(e,n),i,h.soul(e))},function(){function e(t,e){v!==e&&m.ify(this.o,e,this.s)}m.map=function(r,s,u){var c;t("state.map");var l=o(l=r||s)?l:null;return r=n(r=r||s)?r:null,l&&!r?(s=f(s)?s:m(),l[v]=l[v]||{},a(l,e,{o:l,s}),l):(u=u||o(s)?s:c,s=f(s)?s:m(),function(t,n,o,a){if(!r)return e.call({o,s},t,n),t;r.call(u||this||{},t,n,o,a),i(o,n)&&c===o[n]||e.call({o,s},t,n)})}}(),(S=e.obj).as,i=S.has,o=S.is,a=S.map;var b=S.copy,v=(f=e.num.is,n=e.fn.is,h._),w={};!function(){function e(t,e){if(!t||e!==h.soul(t)||!h.is(t,this.fn,this.as))return!0;this.cb&&(n.n=t,n.as=this.as,this.cb.call(n.as,t,e,n))}function n(t){t&&h.is(n.n,t,n.as)}w.is=function(n,r,i,s){return t("graph.is"),!(!n||!o(n)||k(n)||a(n,e,{cb:r,fn:i,as:s}))}}(),function(){function n(t,e){var n;return(n=function(t,e){for(var n,r=t.seen,o=r.length;o--;)if(n=r[o],e.obj===n.obj)return n;r.push(e)}(t,e))?n:(e.env=t,e.soul=a,h.ify(e.obj,r,e)&&(e.link=e.link||s.link.ify(h.soul(e.node)),e.obj!==t.shell&&(t.graph[s.link.is(e.link)]=e.node)),e)}function r(t,e,r){var o,a,c=this,f=c.env;if(h._===e&&i(t,s.link._))return r._;if(o=u(t,e,r,c,f)){if(e||(c.node=c.node||r||{},i(t,h._)&&h.soul(t)&&(c.node._=b(t._)),c.node=h.soul.ify(c.node,s.link.is(c.link)),c.link=c.link||s.link.ify(h.soul(c.node))),(a=f.map)&&(a.call(f.as||{},t,e,r,c),i(r,e))){if(t=r[e],A===t)return void y(r,e);if(!(o=u(t,e,r,c,f)))return}if(!e)return c.node;if(!0===o)return t;if((a=n(f,{obj:t,path:c.path.concat(e)})).node)return a.link}}function a(t){var e=this,n=s.link.is(e.link),r=e.env.graph;e.link=e.link||s.link.ify(t),e.link[s.link._]=t,e.node&&e.node[h._]&&(e.node[h._][s.link._]=t),i(r,n)&&(r[t]=r[n],y(r,n))}function u(t,n,r,i,a){var c;return!!s.is(t)||(o(t)?1:(c=a.invalid)?u(t=c.call(a.as||{},t,n,r),n,r,i,a):(a.err="Invalid value at '"+i.path.concat(n).join(".")+"'!",void(e.list.is(t)&&(a.err+=" Use `.set(item)` instead of an Array."))))}w.ify=function(e,r,o){t("graph.ify");var i={path:[],obj:e};return r?"string"==typeof r?r={soul:r}:"function"==typeof r&&(r.map=r):r={},"string"==typeof o&&(r.soul=r.soul||o,o=A),r.soul&&(i.link=s.link.ify(r.soul)),r.shell=(o||{}).shell,r.graph=r.graph||{},r.seen=r.seen||[],r.as=r.as||o,n(r,i),r.root=i.node,r.graph}}(),w.node=function(e){t("graph.node");var n=h.soul(e);if(n)return p({},n,e)},function(){function e(t,e){var n,r;if(h._!==e)(n=s.link.is(t))?(r=this.opt.seen[n])?this.obj[e]=r:this.obj[e]=this.opt.seen[n]=w.to(this.graph,n,this.opt):this.obj[e]=t;else{if(k(t,s.link._))return;this.obj[e]=b(t)}}w.to=function(n,r,o){if(t("graph.to"),n){var i={};return o=o||{seen:{}},a(n[r],e,{obj:i,graph:n,opt:o}),i}}}(),n=e.fn.is,o=(S=e.obj).is,y=S.del,i=S.has;var S,A,k=S.empty;p=S.put,a=S.map,b=S.copy,e.graph=e.graph||w}}()},30:(t,e,n)=>{t=n.nmd(t);var r=n(287).hp;!function(){function e(t,r){return r?n(736)(t):t.slice?e[o(t)]:function(n,r){t(n={exports:{}}),e[o(r)]=n.exports};function o(t){return t.split("/").slice(-1).toString().replace(".js","")}}var o=t;e((function(t){"undefined"!=typeof self&&(t.window=self),"undefined"!=typeof window&&(t.window=window);var e=(t.window||t).SEA||{};(e.window=t.window)&&(e.window.SEA=e);try{void 0+""!=typeof o&&(o.exports=e)}catch(t){}t.exports=e}))(e,"./root"),e((function(t){var n=e("./root");try{n.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch(t){}}))(e,"./https"),e((function(t){var o;if(o+""==typeof btoa){if(o+""==typeof r)try{n.g.Buffer=e("buffer",1).Buffer}catch(t){console.log("Please `npm install buffer` or add it to your package.json !")}n.g.btoa=function(t){return r.from(t,"binary").toString("base64")},n.g.atob=function(t){return r.from(t,"base64").toString("binary")}}}))(e,"./base64"),e((function(t){function n(){}e("./base64"),Object.assign(n,{from:Array.from}),n.prototype=Object.create(Array.prototype),n.prototype.toString=function(t,e,n){t=t||"utf8",e=e||0;const r=this.length;if("hex"===t){const t=new Uint8Array(this);return[...Array((n&&n+1||r)-e).keys()].map((n=>t[n+e].toString(16).padStart(2,"0"))).join("")}return"utf8"===t?Array.from({length:(n||r)-e},((t,n)=>String.fromCharCode(this[n+e]))).join(""):"base64"===t?btoa(this):void 0},t.exports=n}))(e,"./array"),e((function(t){e("./base64");var n=e("./array");function r(...t){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),r.from(...t)}r.prototype=Object.create(Array.prototype),Object.assign(r,{from(){if(!Object.keys(arguments).length||null==arguments[0])throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const t=arguments[0];let e;if("string"==typeof t){const r=arguments[1]||"utf8";if("hex"===r){const r=t.match(/([\da-fA-F]{2})/g).map((t=>parseInt(t,16)));if(!r||!r.length)throw new TypeError("Invalid first argument for type 'hex'.");e=n.from(r)}else if("utf8"===r||"binary"===r){const r=t.length,o=new Uint16Array(r);Array.from({length:r},((e,n)=>o[n]=t.charCodeAt(n))),e=n.from(o)}else if("base64"===r){const r=atob(t),o=r.length,i=new Uint8Array(o);Array.from({length:o},((t,e)=>i[e]=r.charCodeAt(e))),e=n.from(i)}else"binary"===r?e=n.from(t):console.info("SafeBuffer.from unknown encoding: "+r);return e}if(t.byteLength,t.byteLength?t.byteLength:t.length){let e;return t instanceof ArrayBuffer&&(e=new Uint8Array(t)),n.from(e||t)}},alloc:(t,e=0)=>n.from(new Uint8Array(Array.from({length:t},(()=>e)))),allocUnsafe:t=>n.from(new Uint8Array(Array.from({length:t}))),concat(t){if(!Array.isArray(t))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return n.from(t.reduce(((t,e)=>t.concat(Array.from(e))),[]))}}),r.prototype.from=r.from,r.prototype.toString=n.prototype.toString,t.exports=r}))(e,"./buffer"),e((function(t){const n=e("./root"),r={Buffer:e("./buffer")};var i={};if(JSON.parseAsync=JSON.parseAsync||function(t,e,n){try{e(void 0,JSON.parse(t,n))}catch(t){e(t)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,e,n,r){try{e(void 0,JSON.stringify(t,n,r))}catch(t){e(t)}},r.parse=function(t,e){return new Promise((function(n,r){JSON.parseAsync(t,(function(t,e){t?r(t):n(e)}),e)}))},r.stringify=function(t,e,n){return new Promise((function(r,o){JSON.stringifyAsync(t,(function(t,e){t?o(t):r(e)}),e,n)}))},n.window&&(r.crypto=n.window.crypto||n.window.msCrypto,r.subtle=(r.crypto||i).subtle||(r.crypto||i).webkitSubtle,r.TextEncoder=n.window.TextEncoder,r.TextDecoder=n.window.TextDecoder,r.random=t=>r.Buffer.from(r.crypto.getRandomValues(new Uint8Array(r.Buffer.alloc(t))))),!r.TextDecoder){const{TextEncoder:t,TextDecoder:n}=e((void 0+""==typeof o?".":"")+"./lib/text-encoding",1);r.TextDecoder=n,r.TextEncoder=t}if(!r.crypto)try{var a=e("crypto",1);Object.assign(r,{crypto:a,random:t=>r.Buffer.from(a.randomBytes(t))});const{Crypto:t}=e("@peculiar/webcrypto",1);r.ossl=r.subtle=new t({directory:"ossl"}).subtle}catch(t){console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}t.exports=r}))(e,"./shim"),e((function(t){var n=e("./root"),r=e("./shim"),o={pbkdf2:{hash:{name:"SHA-256"},iter:1e5,ks:64},ecdsa:{pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},ecdh:{name:"ECDH",namedCurve:"P-256"},jwk:function(t,e){var n={kty:"EC",crv:"P-256",x:(t=t.split("."))[0],y:t[1],ext:!0};return n.key_ops=e?["sign"]:["verify"],e&&(n.d=e),n},keyToJwk:function(t){return{kty:"oct",k:t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},recall:{validity:43200,hook:function(t){return t}},check:function(t){return"string"==typeof t&&"SEA{"===t.slice(0,4)},parse:async function(t){try{var e="string"==typeof t;return e&&"SEA{"===t.slice(0,4)&&(t=t.slice(3)),e?await r.parse(t):t}catch(t){}return t}};n.opt=o,t.exports=o}))(e,"./settings"),e((function(t){var n=e("./shim");t.exports=async function(t,e){var r="string"==typeof t?t:await n.stringify(t),o=await n.subtle.digest({name:e||"SHA-256"},(new n.TextEncoder).encode(r));return n.Buffer.from(o)}}))(e,"./sha256"),e((function(t){const n=e("./shim"),r=n.subtle,o=n.ossl?n.ossl:r;t.exports=t=>o.digest({name:"SHA-1"},new ArrayBuffer(t))}))(e,"./sha1"),e((function(t){var n=e("./root"),r=e("./shim"),o=e("./settings"),i=e("./sha256");n.work=n.work||(async(t,e,a,s)=>{try{var u=(e||{}).epub||e;if(s=s||{},u instanceof Function&&(a=u,u=void 0),t="string"==typeof t?t:await r.stringify(t),"sha"===(s.name||"").toLowerCase().slice(0,3)){var c=r.Buffer.from(await i(t,s.name),"binary").toString(s.encode||"base64");if(a)try{a(c)}catch(t){console.log(t)}return c}u=u||r.random(9);var f=await(r.ossl||r.subtle).importKey("raw",(new r.TextEncoder).encode(t),{name:s.name||"PBKDF2"},!1,["deriveBits"]),l=await(r.ossl||r.subtle).deriveBits({name:s.name||"PBKDF2",iterations:s.iterations||o.pbkdf2.iter,salt:(new r.TextEncoder).encode(s.salt||u),hash:s.hash||o.pbkdf2.hash},f,s.length||8*o.pbkdf2.ks);t=r.random(t.length);var p=r.Buffer.from(l,"binary").toString(s.encode||"base64");if(a)try{a(p)}catch(t){console.log(t)}return p}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(a&&a())}}),t.exports=n.work}))(e,"./work"),e((function(t){var n=e("./root"),r=e("./shim");e("./settings"),n.name=n.name||(async(t,e)=>{try{if(t)try{t()}catch(t){console.log(t)}return}catch(e){if(console.log(e),n.err=e,n.throw)throw e;return void(t&&t())}}),n.pair=n.pair||(async(t,e)=>{try{var o=r.ossl||r.subtle,i=await r.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then((async t=>{var e={};e.priv=(await r.subtle.exportKey("jwk",t.privateKey)).d;var n=await r.subtle.exportKey("jwk",t.publicKey);return e.pub=n.x+"."+n.y,e}));try{var a=await o.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then((async t=>{var e={};e.epriv=(await o.exportKey("jwk",t.privateKey)).d;var n=await o.exportKey("jwk",t.publicKey);return e.epub=n.x+"."+n.y,e}))}catch(t){if(n.window)throw t;if("Error: ECDH is not a supported algorithm"!=t)throw t;console.log("Ignoring ECDH...")}a=a||{};var s={pub:i.pub,priv:i.priv,epub:a.epub,epriv:a.epriv};if(t)try{t(s)}catch(t){console.log(t)}return s}catch(e){if(console.log(e),n.err=e,n.throw)throw e;return void(t&&t())}}),t.exports=n.pair}))(e,"./pair"),e((function(t){var n,r=e("./root"),o=e("./shim"),i=e("./settings"),a=e("./sha256");r.sign=r.sign||(async(t,e,s,u)=>{try{if(u=u||{},!(e||u).priv){if(!r.I)throw"No signing key.";e=await r.I(null,{what:t,how:"sign",why:u.why})}if(n===t)throw"`undefined` not allowed.";var c=await i.parse(t),f=u.check=u.check||c;if(r.verify&&(r.opt.check(f)||f&&f.s&&f.m)&&n!==await r.verify(f,e)){var l=await i.parse(f);if(u.raw||(l="SEA"+await o.stringify(l)),s)try{s(l)}catch(t){console.log(t)}return l}var p=e.pub,h=e.priv,y=i.jwk(p,h),d=await a(c),g=await(o.ossl||o.subtle).importKey("jwk",y,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then((t=>(o.ossl||o.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},t,new Uint8Array(d))));if(l={m:c,s:o.Buffer.from(g,"binary").toString(u.encode||"base64")},u.raw||(l="SEA"+await o.stringify(l)),s)try{s(l)}catch(t){console.log(t)}return l}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(s&&s())}}),t.exports=r.sign}))(e,"./sign"),e((function(t){var n,r=e("./root"),o=e("./shim"),i=e("./settings"),a=e("./sha256");r.verify=r.verify||(async(t,e,s,u)=>{try{var c=await i.parse(t);if(!1===e){var f=await i.parse(c.m);if(s)try{s(f)}catch(t){console.log(t)}return f}u=u||{};var l,p,h,y=e.pub||e,d=r.opt.slow_leak?await r.opt.slow_leak(y):await(o.ossl||o.subtle).importKey("jwk",i.jwk(y),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),g=await a(c.m);try{if(l=o.Buffer.from(c.s,u.encode||"base64"),p=new Uint8Array(l),!(h=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},d,p,new Uint8Array(g))))throw"Signature did not match."}catch(n){if(r.opt.fallback)return await r.opt.fall_verify(t,e,s,u)}var m=h?await i.parse(c.m):n;if(s)try{s(m)}catch(t){console.log(t)}return m}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(s&&s())}}),t.exports=r.verify;var s={},u=(r.opt.slow_leak=t=>{if(s[t])return s[t];var e=i.jwk(t);return s[t]=(o.ossl||o.subtle).importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),s[t]},r.opt);r.opt.fall_verify=async function(t,e,s,c,f){if(f===r.opt.fallback)throw"Signature did not match";f=f||1;var l=t||"";t=r.opt.unpack(t)||t;var p,h,y,d=await i.parse(t),g=e.pub||e,m=await r.opt.slow_leak(g),b=f<=r.opt.fallback?o.Buffer.from(await o.subtle.digest({name:"SHA-256"},(new o.TextEncoder).encode(await i.parse(d.m)))):await a(d.m);try{if(p=o.Buffer.from(d.s,c.encode||"base64"),h=new Uint8Array(p),!(y=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},m,h,new Uint8Array(b))))throw"Signature did not match."}catch(t){try{p=o.Buffer.from(d.s,"utf8"),h=new Uint8Array(p),y=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},m,h,new Uint8Array(b))}catch(t){if(!y)throw"Signature did not match."}}var v=y?await i.parse(d.m):n;if(u.fall_soul=l["#"],u.fall_key=l["."],u.fall_val=t,u.fall_state=l[">"],s)try{s(v)}catch(t){console.log(t)}return v},r.opt.fallback=2}))(e,"./verify"),e((function(t){var n=e("./shim"),r=e("./settings"),o=e("./sha256");t.exports=async(t,e,i)=>{i=i||{};const a=t+(e||n.random(8)).toString("utf8"),s=n.Buffer.from(await o(a),"binary"),u=r.keyToJwk(s);return await n.subtle.importKey("jwk",u,{name:"AES-GCM"},!1,["encrypt","decrypt"])}}))(e,"./aeskey"),e((function(t){var n=e("./root"),r=e("./shim"),o=(e("./settings"),e("./aeskey"));n.encrypt=n.encrypt||(async(t,e,i,a)=>{try{a=a||{};var s=(e||a).epriv||e;if(void 0===t)throw"`undefined` not allowed.";if(!s){if(!n.I)throw"No encryption key.";s=(e=await n.I(null,{what:t,how:"encrypt",why:a.why})).epriv||e}var u="string"==typeof t?t:await r.stringify(t),c={s:r.random(9),iv:r.random(15)},f=await o(s,c.s,a).then((t=>r.subtle.encrypt({name:a.name||"AES-GCM",iv:new Uint8Array(c.iv)},t,(new r.TextEncoder).encode(u)))),l={ct:r.Buffer.from(f,"binary").toString(a.encode||"base64"),iv:c.iv.toString(a.encode||"base64"),s:c.s.toString(a.encode||"base64")};if(a.raw||(l="SEA"+await r.stringify(l)),i)try{i(l)}catch(t){console.log(t)}return l}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(i&&i())}}),t.exports=n.encrypt}))(e,"./encrypt"),e((function(t){var n=e("./root"),r=e("./shim"),o=e("./settings"),i=e("./aeskey");n.decrypt=n.decrypt||(async(t,e,a,s)=>{try{s=s||{};var u=(e||s).epriv||e;if(!u){if(!n.I)throw"No decryption key.";u=(e=await n.I(null,{what:t,how:"decrypt",why:s.why})).epriv||e}var c,f,l,p=await o.parse(t);try{c=r.Buffer.from(p.s,s.encode||"base64"),f=r.Buffer.from(p.iv,s.encode||"base64"),l=r.Buffer.from(p.ct,s.encode||"base64");var h=await i(u,c,s).then((t=>r.subtle.decrypt({name:s.name||"AES-GCM",iv:new Uint8Array(f),tagLength:128},t,new Uint8Array(l))))}catch(r){if("utf8"===s.encode)throw"Could not decrypt";if(n.opt.fallback)return s.encode="utf8",await n.decrypt(t,e,a,s)}var y=await o.parse(new r.TextDecoder("utf8").decode(h));if(a)try{a(y)}catch(t){console.log(t)}return y}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(a&&a())}}),t.exports=n.decrypt}))(e,"./decrypt"),e((function(t){var n=e("./root"),r=e("./shim");e("./settings"),n.secret=n.secret||(async(t,e,i,a)=>{try{if(a=a||{},!e||!e.epriv||!e.epub){if(!n.I)throw"No secret mix.";e=await n.I(null,{what:t,how:"secret",why:a.why})}var s=t.epub||t,u=e.epub,c=e.epriv,f=r.ossl||r.subtle,l=o(s),p=Object.assign({public:await f.importKey(...l,!0,[])},{name:"ECDH",namedCurve:"P-256"}),h=o(u,c),y=await f.importKey(...h,!1,["deriveBits"]).then((async t=>{var e=await f.deriveBits(p,t,256),n=new Uint8Array(e),r=await f.importKey("raw",n,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return f.exportKey("jwk",r).then((({k:t})=>t))}));if(i)try{i(y)}catch(t){console.log(t)}return y}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(i&&i())}});var o=(t,e)=>{var[n,r]=t.split("."),o=e?{d:e}:{};return["jwk",Object.assign(o,{x:n,y:r,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};t.exports=n.secret}))(e,"./secret"),e((function(t){var n=e("./root");n.certify=n.certify||(async(t,e={},r,o,i={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),t=(()=>{var e=[];if(t){if(("string"==typeof t||Array.isArray(t))&&t.indexOf("*")>-1)return"*";if("string"==typeof t)return t;if(Array.isArray(t)){if(1===t.length&&t[0])return"object"==typeof t[0]&&t[0].pub?t[0].pub:"string"==typeof t[0]?t[0]:null;t.map((t=>{"string"==typeof t?e.push(t):"object"==typeof t&&t.pub&&e.push(t.pub)}))}return"object"==typeof t&&t.pub?t.pub:e.length>0?e:null}})(),!t)return console.log("No certificant found.");const s=!i.expiry||"number"!=typeof i.expiry&&"string"!=typeof i.expiry?null:parseFloat(i.expiry),u=(e||{}).read?e.read:null,c=(e||{}).write?e.write:"string"==typeof e||Array.isArray(e)||e["+"]||e["#"]||e["."]||e["="]||e["*"]||e[">"]||e["<"]?e:null,f=(i||{}).block||(i||{}).blacklist||(i||{}).ban||{},l=f.read&&("string"==typeof f.read||(f.read||{})["#"])?f.read:null,p="string"==typeof f?f:f.write&&("string"==typeof f.write||f.write["#"])?f.write:null;if(!u&&!c)return console.log("No policy found.");const h=JSON.stringify({c:t,...s?{e:s}:{},...u?{r:u}:{},...c?{w:c}:{},...l?{rb:l}:{},...p?{wb:p}:{}});var a=await n.sign(h,r,null,{raw:1});if(i.raw||(a="SEA"+JSON.stringify(a)),o)try{o(a)}catch(t){console.log(t)}return a}catch(t){if(n.err=t,n.throw)throw t;return void(o&&o())}}),t.exports=n.certify}))(e,"./certify"),e((function(t){var n=e("./shim"),r=e("./root");r.work=e("./work"),r.sign=e("./sign"),r.verify=e("./verify"),r.encrypt=e("./encrypt"),r.decrypt=e("./decrypt"),r.certify=e("./certify"),r.random=r.random||n.random,r.Buffer=r.Buffer||e("./buffer"),r.keyid=r.keyid||(async t=>{try{const e=n.Buffer.concat(t.replace(/-/g,"+").replace(/_/g,"/").split(".").map((t=>n.Buffer.from(t,"base64")))),r=n.Buffer.concat([n.Buffer.from([153,e.length/256,e.length%256]),e]),o=await sha1hash(r),i=n.Buffer.from(o,"binary");return i.toString("hex",i.length-8)}catch(t){throw console.log(t),t}}),((r.window||{}).GUN||{}).SEA=r,t.exports=r}))(e,"./sea"),e((function(t){var n,r=e("./sea");function i(t){this._={$:this}}function a(){return n.state().toString(36).replace(".","")}n=r.window?r.window.GUN||{chain:{}}:e((void 0+""==typeof o?".":"")+"./gun",1),r.GUN=n,i.prototype=function(){function t(){}return t.prototype=n.chain,new t}(),i.prototype.constructor=i,n.chain.user=function(t){var e,n=this.back(-1);if(t)return t=r.opt.pub((t._||"")["#"])||t,n.get("~"+t);if(e=n.back("user"))return e;var o=n=n._,s=o.opt.uuid||a;return(o=(e=o.user=this.chain(new i))._).opt={},o.opt.uuid=function(t){var e=s(),r=n.user;return r&&(r=r.is)&&(r=r.pub)?(e="~"+r+"/"+e,t&&t.call&&t(null,e),e):e},e},n.User=i,i.GUN=n,i.SEA=n.SEA=r,t.exports=i}))(e,"./user"),e((function(t){var n;(""+n!=typeof GUN?GUN||{chain:{}}:e((""+n==typeof o?".":"")+"./gun",1)).chain.then=function(t,e){var n=this,r=new Promise((function(t,r){n.once(t,e)}));return t?r.then(t):r}}))(e,"./then"),e((function(t){var n=e("./user"),r=n.SEA,o=n.GUN,i=function(){};n.prototype.create=function(...t){var e,n="object"==typeof t[0]&&(t[0].pub||t[0].epub)?t[0]:"object"==typeof t[1]&&(t[1].pub||t[1].epub)?t[1]:null,a=n&&(n.pub||n.epub)?n.pub:"string"==typeof t[0]?t[0]:null,s=n&&(n.pub||n.epub)?n:a&&"string"==typeof t[1]?t[1]:null,u=t.filter((t=>"function"==typeof t))[0]||null,c=t&&t.length>1&&"object"==typeof t[t.length-1]?t[t.length-1]:{},f=this,l=f._,p=f.back(-1);if(u=u||i,!1!==(c=c||{}).check&&(a||(e="No user."),(s||"").length<8&&(e="Password too short!"),e))return u({err:o.log(e)}),f;if(l.ing)return(u||i)({err:o.log("User is already being created or authenticated!"),wait:!0}),f;l.ing=!0;var h={a:function(t){if(h.pubs=t,t&&!c.already){var e={err:o.log("User already created!")};return l.ing=!1,(u||i)(e),void f.leave()}h.salt=String.random(64),r.work(s,h.salt,h.b)},b:function(t){h.proof=t,n?h.c(n):r.pair(h.c)},c:function(t){var e;h.pair=t||{},(e=l.root.user)&&(e._.sea=t,e.is={pub:t.pub,epub:t.epub,alias:a}),h.data={pub:t.pub},h.d()},d:function(){h.data.alias=a,h.e()},e:function(){h.data.epub=h.pair.epub,r.encrypt({priv:h.pair.priv,epriv:h.pair.epriv},h.proof,h.f,{raw:1})},f:function(t){h.data.auth=JSON.stringify({ek:t,s:h.salt}),h.g(h.data.auth)},g:function(t){var e;h.data.auth=h.data.auth||t,p.get(e="~"+h.pair.pub).put(h.data).on(h.h);var n={};n[e]={"#":e},p.get("~@"+a).put(n).get(e).on(h.i)},h:function(t,e,n,r){r.off(),h.h.ok=1,h.i()},i:function(t,e,r,o){o&&(h.i.ok=1,o.off()),h.h.ok&&h.i.ok&&(l.ing=!1,u({ok:0,pub:h.pair.pub}),i===u&&(n?f.auth(n):f.auth(a,s)))}};return p.get("~@"+a).once(h.a),f},n.prototype.leave=function(t,e){var n=this.back(-1)._.user;if(n&&(delete n.is,delete n._.is,delete n._.sea),r.window)try{var o={};delete(o=r.window.sessionStorage).recall,delete o.pair}catch(t){}return this}}))(e,"./create"),e((function(t){var n=e("./user"),r=n.SEA,o=n.GUN,i=function(){};function a(t){if("string"!=typeof t)return t;try{t=JSON.parse(t)}catch(e){t={}}return t}n.prototype.auth=function(...t){var e="object"==typeof t[0]&&(t[0].pub||t[0].epub)?t[0]:"object"==typeof t[1]&&(t[1].pub||t[1].epub)?t[1]:null,n=e||"string"!=typeof t[0]?null:t[0],s=!n&&(!e||e.priv&&e.epriv)||"string"!=typeof t[1]?null:t[1],u=t.filter((t=>"function"==typeof t))[0]||null,c=t&&t.length>1&&"object"==typeof t[t.length-1]?t[t.length-1]:{},f=this,l=f._,p=f.back(-1);if(l.ing)return(u||i)({err:o.log("User is already being created or authenticated!"),wait:!0}),f;l.ing=!0;var h,y={},d=9;return y.a=function(t){if(!t)return y.b();if(!t.pub){var e=[];return Object.keys(t).forEach((function(n){"_"!=n&&e.push(t[n])})),y.b(e)}if(y.name)return y.f(t);y.c((y.data=t).auth)},y.b=function(t){var e=(y.list=(y.list||[]).concat(t||[])).shift();if(h===e)return y.name?y.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):n&&d--?void p.get("~@"+n).once(y.a):y.err("Wrong user or password.");p.get(e).once(y.a)},y.c=function(t){return h===t?y.b():"string"==typeof t?y.c(a(t)):void r.work(s,(y.auth=t).s,y.d,y.enc)},y.d=function(t){r.decrypt(y.auth.ek,t,y.e,y.enc)},y.e=function(t){if(h===t)return y.enc?(y.enc=null,y.b()):(y.enc={encode:"utf8"},y.c(y.auth));y.half=t,y.f(y.data)},y.f=function(t){var e=y.half||{},n=y.data||{};y.g(y.lol={pub:t.pub||n.pub,epub:t.epub||n.epub,priv:t.priv||e.priv,epriv:t.epriv||e.epriv})},y.g=function(t){if(!t||!t.pub||!t.epub)return y.b();y.pair=t;var e=p._.user,d=e._,g=(d.tag,d.opt);(d=e._=p.get("~"+t.pub)._).opt=g,e.is={pub:t.pub,epub:t.epub,alias:n||t.pub},d.sea=y.pair,l.ing=!1;try{s&&h==(a(l.root.graph["~"+t.pub].auth)||"")[":"]&&(c.shuffle=c.change=s)}catch(t){}if(c.change?y.z():(u||i)(d),r.window&&(f.back("user")._.opt||c).remember)try{var m={};(m=r.window.sessionStorage).recall=!0,m.pair=JSON.stringify(t)}catch(t){}try{p._.tag.auth?p._.on("auth",d):setTimeout((function(){p._.on("auth",d)}),1)}catch(t){o.log("Your 'auth' callback crashed with:",t)}},y.h=function(t){return t?((n=t.alias)||(n=t.alias="~"+e.pub),t.auth?(e=null,void y.c((y.data=t).auth)):y.g(e)):y.b()},y.z=function(){y.salt=String.random(64),r.work(c.change,y.salt,y.y)},y.y=function(t){r.encrypt({priv:y.pair.priv,epriv:y.pair.epriv},t,y.x,{raw:1})},y.x=function(t){y.w(JSON.stringify({ek:t,s:y.salt}))},y.w=function(t){if(c.shuffle){console.log("migrate core account from UTF8 & shuffle");var e={};Object.keys(y.data).forEach((function(t){e[t]=y.data[t]})),delete e._,e.auth=t,p.get("~"+y.pair.pub).put(e)}p.get("~"+y.pair.pub).get("auth").put(t,u||i)},y.err=function(t){var e={err:o.log(t||"User cannot be found!")};l.ing=!1,(u||i)(e)},y.plugin=function(t){if(!(y.name=t))return y.err();var e=[t];"~"!==t[0]&&(e[1]="~"+t,e[2]="~@"+t),y.b(e)},e?e.priv&&e.epriv?y.g(e):p.get("~"+e.pub).once(y.h):n?p.get("~@"+n).once(y.a):n||s||r.name(y.plugin),f}}))(e,"./auth"),e((function(t){var n=e("./user"),r=n.SEA;n.GUN,n.prototype.recall=function(t,e){var n=this,o=n.back(-1);if((t=t||{})&&t.sessionStorage){if(r.window)try{var i;(i=r.window.sessionStorage)&&(o._.opt.remember=!0,(n.back("user")._.opt||t).remember=!0,(i.recall||i.pair)&&o.user().auth(JSON.parse(i.pair),e))}catch(t){}return n}return n}}))(e,"./recall"),e((function(t){var n=e("./user"),r=n.SEA,o=n.GUN,i=function(){};n.prototype.pair=function(){var t,e=this;try{t=new Proxy({DANGER:""},{get:function(t,n,r){if(e.is&&(e._||"").sea)return e._.sea[n]}})}catch(t){}return t},n.prototype.delete=async function(t,e,n){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var r=this,a=(r.back(-1),r.back("user"));try{a.auth(t,e,(function(t){(a.is||{}).pub,a.map().once((function(){this.put(null)})),a.leave(),(n||i)({ok:0})}))}catch(t){o.log("User.delete failed! Error:",t)}return r},n.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const t=this.back(-1);try{return await authRecall(t),t._.user._}catch(t){const e="No session!";throw o.log(e),{err:e}}},n.prototype.trust=async function(t){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(t)&&t.get("pub").get(((t,e)=>{console.log(t,e)})),t.get("trust").get(path).put(theirPubkey)},n.prototype.grant=function(t,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var n=this,o=n.back(-1).user(),i=o._.sea,a="";return n.back((function(t){t.is||(a+=t.get||"")})),async function(){var n,s=await o.get("grant").get(i.pub).get(a).then();(s=await r.decrypt(s,i))||(s=r.random(16).toString(),n=await r.encrypt(s,i),o.get("grant").get(i.pub).get(a).put(n));var u=t.get("pub").then(),c=t.get("epub").then();u=await u,c=await c;var f=await r.secret(c,i);n=await r.encrypt(s,f),o.get("grant").get(u).get(a).put(n,e)}(),n},n.prototype.secret=function(t,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var n=this,o=n.back(-1).user(),i=o.pair(),a="";return n.back((function(t){t.is||(a+=t.get||"")})),async function(){var s,u=await o.get("trust").get(i.pub).get(a).then();(u=await r.decrypt(u,i))||(u=r.random(16).toString(),s=await r.encrypt(u,i),o.get("trust").get(i.pub).get(a).put(s)),s=await r.encrypt(t,u),n.put(s,e)}(),n},t.exports=n}))(e,"./share"),e((function(t){var n,r=e("./sea"),i=e("./settings"),a=(r.window||"").GUN||e((""+n==typeof o?".":"")+"./gun",1);function s(t){var e,n=this,o=n.as,i=t.put,u=i["#"],c=i["."],f=i[":"],l=i[">"],p=t["#"];if(u&&c)if((t._||"").faith&&(o.opt||"").faith&&"function"==typeof t._)r.opt.pack(i,(function(e){r.verify(e,!1,(function(e){i["="]=r.opt.unpack(e),n.to.next(t)}))}));else{var h=function(e){o.on("in",{"@":p,err:t.err=e})};(t._||"").DBG&&((t._||"").DBG.c=+new Date),0<=u.indexOf("<?")&&(e=parseFloat(u.split("<?")[1]||""))&&l<a.state()-1e3*e?(e=t._)&&e.stun&&e.stun--:"~@"!==u?"~@"!==u.slice(0,2)?(e=r.opt.pub(u))?s.pub(n,t,f,c,u,o,h,o.user||"",e):0<=u.indexOf("#")?s.hash(n,t,f,c,u,o,h):s.any(n,t,f,c,u,o,h,o.user||""):s.pubs(n,t,f,c,u,o,h):s.alias(n,t,f,c,u,o,h)}}a.on("opt",(function(t){t.sea||(t.sea={own:{}},t.on("put",s,t)),this.to.next(t)})),s.hash=function(t,e,n,o,i,a,s){r.work(n,null,(function(n){return n&&n===o.split("#").slice(-1)[0]||n&&n===function(t){let e="";for(let n=0;n<t.length;n++)e+=n-1&1?"":String.fromCharCode(parseInt(t.substring(n-1,n+1),16));return btoa(e)}(o.split("#").slice(-1)[0])?t.to.next(e):void s("Data hash not same as hash!")}),{name:"SHA-256"})},s.alias=function(t,e,n,r,o,i,a){return n?"~@"+r===c(n)?t.to.next(e):void a("Alias not same!"):a("Data must exist!")},s.pubs=function(t,e,n,r,o,i,a){return n?r===c(n)?t.to.next(e):void a("Alias not same!"):a("Alias must exist!")},s.pub=async function(t,e,o,s,u,f,l,p,h){var y;const d=await i.parse(o)||{},g=(o,i,c)=>{if(o.m&&o.s&&i&&h)return r.verify(o,h,(r=>{if(n!==r&&n!==r.e&&e.put[">"]&&e.put[">"]>parseFloat(r.e))return l("Certificate expired.");if(n!==r&&r.c&&r.w&&(r.c===i||r.c.indexOf("*")>-1)){let e=u.indexOf("/")>-1?u.replace(u.substring(0,u.indexOf("/")+1),""):"";String.match=String.match||a.text.match;const n=Array.isArray(r.w)?r.w:"object"==typeof r.w||"string"==typeof r.w?[r.w]:[];for(const a of n)if(String.match(e,a["#"])&&String.match(s,a["."])||!a["."]&&String.match(e,a["#"])||!a["#"]&&String.match(s,a["."])||String.match(e?e+"/"+s:s,a["#"]||a)){if(a["+"]&&a["+"].indexOf("*")>-1&&e&&-1==e.indexOf(i)&&-1==s.indexOf(i))return l(`Path "${e}" or key "${s}" must contain string "${i}".`);if(r.wb&&("string"==typeof r.wb||(r.wb||{})["#"])){var o=t.as.root.$.back(-1);return"string"==typeof r.wb&&"~"!==r.wb.slice(0,1)&&(o=o.get("~"+h)),o.get(r.wb).get(i).once((t=>!t||1!==t&&!0!==t?c(r):l(`Certificant ${i} blocked.`)))}return c(r)}return l("Certificate verification fail.")}}))};if("pub"===s&&"~"+h===u)return o===h?t.to.next(e):l("Account not same!");(y=p.is)&&y.pub&&!d["*"]&&!d["+"]&&(h===y.pub||h!==y.pub&&((e._.msg||{}).opt||{}).cert)?r.opt.pack(e.put,(a=>{r.sign(a,p._.sea,(async function(a){if(n===a)return l(r.err||"Signature fail.");if(e.put[":"]={":":y=r.opt.unpack(a.m),"~":a.s},e.put["="]=y,h===p.is.pub)return(y=c(o))&&((f.sea.own[y]=f.sea.own[y]||{})[h]=1),void JSON.stringifyAsync(e.put[":"],(function(n,r){return n?l(n||"Stringify error."):(e.put[":"]=r,t.to.next(e))}));if(h!==p.is.pub&&((e._.msg||{}).opt||{}).cert){const n=await i.parse(e._.msg.opt.cert);n&&n.m&&n.s&&g(n,p.is.pub,(r=>{e.put[":"]["+"]=n,e.put[":"]["*"]=p.is.pub,JSON.stringifyAsync(e.put[":"],(function(n,r){return n?l(n||"Stringify error."):(e.put[":"]=r,t.to.next(e))}))}))}}),{raw:1})})):r.opt.pack(e.put,(o=>{r.verify(o,d["*"]||h,(function(o){var i;return o=r.opt.unpack(o),n===o?l("Unverified data."):((i=c(o))&&h===r.opt.pub(i)&&((f.sea.own[i]=f.sea.own[i]||{})[h]=1),d["+"]&&d["+"].m&&d["+"].s&&d["*"]?void g(d["+"],d["*"],(n=>(e.put["="]=o,t.to.next(e)))):(e.put["="]=o,t.to.next(e)))}))}))},s.any=function(t,e,n,r,o,i,a,s){if(i.opt.secure)return a("Soul missing public key at '"+r+"'.");i.on("secure",(function(e){if(this.off(),!i.opt.secure)return t.to.next(e);a("Data cannot be changed.")})).on.on("secure",e)};var u=a.valid,c=function(t,e){return"string"==typeof(e=u(t))&&e},f=((a.state||"").ify,/[^\w_-]/);r.opt.pub=function(t){if(t&&(t=t.split("~"))&&(t=t[1])&&(t=t.split(f).slice(0,2))&&2==t.length&&"@"!==(t[0]||"")[0])return t.slice(0,2).join(".")},r.opt.stringy=function(t){},r.opt.pack=function(t,e,o,i,s){var u,c;if(r.opt.check(t))return e(t);t&&t["#"]&&t["."]&&t[">"]&&(u=t[":"],c=1),JSON.parseAsync(c?u:t,(function(r,u){var c=n!==(u||"")[":"]&&(u||"")["~"];e(c?{m:{"#":s||t["#"],".":o||t["."],":":(u||"")[":"],">":t[">"]||a.state.is(i,o)},s:c}:t)}))};var l=r.opt;r.opt.unpack=function(t,e,o){var i;if(n!==t){if(t&&n!==(i=t[":"]))return i;if(e=e||l.fall_key,!o&&l.fall_val&&((o={})[e]=l.fall_val),e&&o){if(t===o[e])return t;if(!r.opt.check(o[e]))return t;var s=o&&o._&&o._["#"]||l.fall_soul,u=a.state.is(o,e)||l.fall_state;return t&&4===t.length&&s===t[0]&&e===t[1]&&p(u)===p(t[3])?t[2]:u<r.opt.shuffle_attack?t:void 0}}},r.opt.shuffle_attack=15463296e5;var p=Math.floor}))(e,"./index")}()},736:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=736,t.exports=e},592:(t,e,n)=>{"use strict";var r=n(36),o=function(){return!!r};o.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=o},24:t=>{"use strict";var e={__proto__:null,foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof n)}},39:(t,e,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,o=n(333);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&o()}},333:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},957:(t,e,n)=>{"use strict";var r=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=n(743);t.exports=i.call(r,o)},251:(t,e)=>{e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?o-1:0,p=n?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&s,h+=y,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+h]=255&a,h+=y,a/=256,c-=8);t[n+h-y]|=128*d}},859:(t,e,n)=>{var r="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&o&&"function"==typeof o.get?o.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,f=s&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,d=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,b=String.prototype.slice,v=String.prototype.replace,w=String.prototype.toUpperCase,S=String.prototype.toLowerCase,A=RegExp.prototype.test,k=Array.prototype.concat,E=Array.prototype.join,_=Array.prototype.slice,x=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,D="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,B=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function N(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||A.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var r=t<0?-x(-t):x(t);if(r!==t){var o=String(r),i=b.call(e,o.length+1);return v.call(o,n,"$&_")+"."+v.call(v.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(e,n,"$&_")}var R=n(634),U=R.custom,$=H(U)?U:null,C={__proto__:null,double:'"',single:"'"},F={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function M(t,e,n){var r=n.quoteStyle||e,o=C[r];return o+t+o}function L(t){return v.call(String(t),/"/g,"&quot;")}function G(t){return!("[object Array]"!==q(t)||I&&"object"==typeof t&&I in t)}function K(t){return!("[object RegExp]"!==q(t)||I&&"object"==typeof t&&I in t)}function H(t){if(D)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!T)return!1;try{return T.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,o,s){var u=r||{};if(W(u,"quoteStyle")&&!W(C,u.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(u,"maxStringLength")&&("number"==typeof u.maxStringLength?u.maxStringLength<0&&u.maxStringLength!==1/0:null!==u.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=!W(u,"customInspect")||u.customInspect;if("boolean"!=typeof d&&"symbol"!==d)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(u,"indent")&&null!==u.indent&&"\t"!==u.indent&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(u,"numericSeparator")&&"boolean"!=typeof u.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=u.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return V(e,u);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var A=String(e);return w?N(e,A):A}if("bigint"==typeof e){var x=String(e)+"n";return w?N(e,x):x}var j=void 0===u.depth?5:u.depth;if(void 0===o&&(o=0),o>=j&&j>0&&"object"==typeof e)return G(e)?"[Array]":"[Object]";var U,F=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=E.call(Array(t.indent+1)," ")}return{base:n,prev:E.call(Array(e+1),n)}}(u,o);if(void 0===s)s=[];else if(z(s,e)>=0)return"[Circular]";function J(e,n,r){if(n&&(s=_.call(s)).push(n),r){var i={depth:u.depth};return W(u,"quoteStyle")&&(i.quoteStyle=u.quoteStyle),t(e,i,o+1,s)}return t(e,u,o+1,s)}if("function"==typeof e&&!K(e)){var Y=function(t){if(t.name)return t.name;var e=m.call(g.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),nt=et(e,J);return"[Function"+(Y?": "+Y:" (anonymous)")+"]"+(nt.length>0?" { "+E.call(nt,", ")+" }":"")}if(H(e)){var rt=D?v.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(e);return"object"!=typeof e||D?rt:Q(rt)}if((U=e)&&"object"==typeof U&&("undefined"!=typeof HTMLElement&&U instanceof HTMLElement||"string"==typeof U.nodeName&&"function"==typeof U.getAttribute)){for(var ot="<"+S.call(String(e.nodeName)),it=e.attributes||[],at=0;at<it.length;at++)ot+=" "+it[at].name+"="+M(L(it[at].value),"double",u);return ot+=">",e.childNodes&&e.childNodes.length&&(ot+="..."),ot+"</"+S.call(String(e.nodeName))+">"}if(G(e)){if(0===e.length)return"[]";var st=et(e,J);return F&&!function(t){for(var e=0;e<t.length;e++)if(z(t[e],"\n")>=0)return!1;return!0}(st)?"["+tt(st,F)+"]":"[ "+E.call(st,", ")+" ]"}if(function(t){return!("[object Error]"!==q(t)||I&&"object"==typeof t&&I in t)}(e)){var ut=et(e,J);return"cause"in Error.prototype||!("cause"in e)||P.call(e,"cause")?0===ut.length?"["+String(e)+"]":"{ ["+String(e)+"] "+E.call(ut,", ")+" }":"{ ["+String(e)+"] "+E.call(k.call("[cause]: "+J(e.cause),ut),", ")+" }"}if("object"==typeof e&&d){if($&&"function"==typeof e[$]&&R)return R(e,{depth:j-o});if("symbol"!==d&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{c.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var ct=[];return a&&a.call(e,(function(t,n){ct.push(J(n,e,!0)+" => "+J(t,e))})),X("Map",i.call(e),ct,F)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var ft=[];return f&&f.call(e,(function(t){ft.push(J(t,e))})),X("Set",c.call(e),ft,F)}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t,l);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Z("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{l.call(t,l)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Z("WeakSet");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{return h.call(t),!0}catch(t){}return!1}(e))return Z("WeakRef");if(function(t){return!("[object Number]"!==q(t)||I&&"object"==typeof t&&I in t)}(e))return Q(J(Number(e)));if(function(t){if(!t||"object"!=typeof t||!O)return!1;try{return O.call(t),!0}catch(t){}return!1}(e))return Q(J(O.call(e)));if(function(t){return!("[object Boolean]"!==q(t)||I&&"object"==typeof t&&I in t)}(e))return Q(y.call(e));if(function(t){return!("[object String]"!==q(t)||I&&"object"==typeof t&&I in t)}(e))return Q(J(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==n.g&&e===n.g)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==q(t)||I&&"object"==typeof t&&I in t)}(e)&&!K(e)){var lt=et(e,J),pt=B?B(e)===Object.prototype:e instanceof Object||e.constructor===Object,ht=e instanceof Object?"":"null prototype",yt=!pt&&I&&Object(e)===e&&I in e?b.call(q(e),8,-1):ht?"Object":"",dt=(pt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(yt||ht?"["+E.call(k.call([],yt||[],ht||[]),": ")+"] ":"");return 0===lt.length?dt+"{}":F?dt+"{"+tt(lt,F)+"}":dt+"{ "+E.call(lt,", ")+" }"}return String(e)};var J=Object.prototype.hasOwnProperty||function(t){return t in this};function W(t,e){return J.call(t,e)}function q(t){return d.call(t)}function z(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function V(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return V(b.call(t,0,e.maxStringLength),e)+r}var o=F[e.quoteStyle||"single"];return o.lastIndex=0,M(v.call(v.call(t,o,"\\$1"),/[\x00-\x1f]/g,Y),"single",e)}function Y(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function Q(t){return"Object("+t+")"}function Z(t){return t+" { ? }"}function X(t,e,n,r){return t+" ("+e+") {"+(r?tt(n,r):E.call(n,", "))+"}"}function tt(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+E.call(t,","+n)+"\n"+e.prev}function et(t,e){var n=G(t),r=[];if(n){r.length=t.length;for(var o=0;o<t.length;o++)r[o]=W(t,o)?e(t[o],t):""}var i,a="function"==typeof j?j(t):[];if(D){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in t)W(t,u)&&(n&&String(Number(u))===u&&u<t.length||D&&i["$"+u]instanceof Symbol||(A.call(/[^\w$]/,u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"==typeof j)for(var c=0;c<a.length;c++)P.call(t,a[c])&&r.push("["+e(a[c])+"]: "+e(t[a[c]],t));return r}},655:function(t,e,n){var r;t=n.nmd(t),function(){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var i,a=2147483647,s=36,u=/^xn--/,c=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function y(t){throw new RangeError(l[t])}function d(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function g(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+d((t=t.replace(f,".")).split("."),e).join(".")}function m(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function b(t){return d(t,(function(t){var e="";return t>65535&&(e+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+h(t)})).join("")}function v(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=s)t=p(t/35);return p(r+36*t/(t+38))}function S(t){var e,n,r,o,i,u,c,f,l,h,d,g=[],m=t.length,v=0,S=128,A=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),g.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<m;){for(i=v,u=1,c=s;o>=m&&y("invalid-input"),((f=(d=t.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:s)>=s||f>p((a-v)/u))&&y("overflow"),v+=f*u,!(f<(l=c<=A?1:c>=A+26?26:c-A));c+=s)u>p(a/(h=s-l))&&y("overflow"),u*=h;A=w(v-i,e=g.length+1,0==i),p(v/e)>a-S&&y("overflow"),S+=p(v/e),v%=e,g.splice(v++,0,S)}return b(g)}function A(t){var e,n,r,o,i,u,c,f,l,d,g,b,S,A,k,E=[];for(b=(t=m(t)).length,e=128,n=0,i=72,u=0;u<b;++u)(g=t[u])<128&&E.push(h(g));for(r=o=E.length,o&&E.push("-");r<b;){for(c=a,u=0;u<b;++u)(g=t[u])>=e&&g<c&&(c=g);for(c-e>p((a-n)/(S=r+1))&&y("overflow"),n+=(c-e)*S,e=c,u=0;u<b;++u)if((g=t[u])<e&&++n>a&&y("overflow"),g==e){for(f=n,l=s;!(f<(d=l<=i?1:l>=i+26?26:l-i));l+=s)k=f-d,A=s-d,E.push(h(v(d+k%A,0))),f=p(k/A);E.push(h(v(f,0))),i=w(n,S,r==o),n=0,++r}++n,++e}return E.join("")}i={version:"1.4.1",ucs2:{decode:m,encode:b},decode:S,encode:A,toASCII:function(t){return g(t,(function(t){return c.test(t)?"xn--"+A(t):t}))},toUnicode:function(t){return g(t,(function(t){return u.test(t)?S(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}()},897:(t,e,n)=>{"use strict";var r=n(453),o=n(41),i=n(592)(),a=n(795),s=n(675),u=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||u(e)!==e)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,c=!0;if("length"in t&&a){var f=a(t,"length");f&&!f.configurable&&(r=!1),f&&!f.writable&&(c=!1)}return(r||c||!n)&&(i?o(t,"length",e,!0,!0):o(t,"length",e)),t}},920:(t,e,n)=>{"use strict";var r=n(453),o=n(75),i=n(859),a=n(675),s=r("%WeakMap%",!0),u=r("%Map%",!0),c=o("WeakMap.prototype.get",!0),f=o("WeakMap.prototype.set",!0),l=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0),d=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n};t.exports=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new a("Side channel does not contain "+i(t))},get:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(t)return c(t,r)}else if(u){if(e)return p(e,r)}else if(n)return function(t,e){var n=d(t,e);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(t)return l(t,r)}else if(u){if(e)return y(e,r)}else if(n)return function(t,e){return!!d(t,e)}(n,r);return!1},set:function(r,o){s&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new s),f(t,r,o)):u?(e||(e=new u),h(e,r,o)):(n||(n={key:{},next:null}),function(t,e,n){var r=d(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}}(n,r,o))}};return r}},902:t=>{"use strict";var e=String.prototype.replace,n=/%20/g,r="RFC3986";t.exports={default:r,formatters:{RFC1738:function(t){return e.call(t,n,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:r}},98:(t,e,n)=>{"use strict";var r=n(207),o=n(969),i=n(902);t.exports={formats:i,parse:o,stringify:r}},969:(t,e,n)=>{"use strict";var r=n(176),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},s=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c=function(t,e,n,r){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,f=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var l=0;n.depth>0&&null!==(s=a.exec(i))&&l<n.depth;){if(l+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(s[1])}if(s){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");f.push("["+i.slice(s.index)+"]")}return function(t,e,n,r){for(var o=r?e:u(e,n),i=t.length-1;i>=0;--i){var a,s=t[i];if("[]"===s&&n.parseArrays)a=n.allowEmptyArrays&&(""===o||n.strictNullHandling&&null===o)?[]:[].concat(o);else{a=n.plainObjects?{__proto__:null}:{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,f=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,l=parseInt(f,10);n.parseArrays||""!==f?!isNaN(l)&&s!==f&&String(l)===f&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[])[l]=o:"__proto__"!==f&&(a[f]=o):a={0:o}}o=a}return o}(f,e,n,r)}};t.exports=function(t,e){var n=function(t){if(!t)return a;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?a.charset:t.charset,n=void 0===t.duplicates?a.duplicates:t.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||a.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:a.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:a.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:a.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:a.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:a.depth,duplicates:n,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:a.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?{__proto__:null}:{};for(var f="string"==typeof t?function(t,e){var n={__proto__:null},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var f,l=e.parameterLimit===1/0?void 0:e.parameterLimit,p=c.split(e.delimiter,l),h=-1,y=e.charset;if(e.charsetSentinel)for(f=0;f<p.length;++f)0===p[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[f]?y="utf-8":"utf8=%26%2310003%3B"===p[f]&&(y="iso-8859-1"),h=f,f=p.length);for(f=0;f<p.length;++f)if(f!==h){var d,g,m=p[f],b=m.indexOf("]="),v=-1===b?m.indexOf("="):b+1;-1===v?(d=e.decoder(m,a.decoder,y,"key"),g=e.strictNullHandling?null:""):(d=e.decoder(m.slice(0,v),a.decoder,y,"key"),g=r.maybeMap(u(m.slice(v+1),e),(function(t){return e.decoder(t,a.decoder,y,"value")}))),g&&e.interpretNumericEntities&&"iso-8859-1"===y&&(g=s(String(g))),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g);var w=o.call(n,d);w&&"combine"===e.duplicates?n[d]=r.combine(n[d],g):w&&"last"!==e.duplicates||(n[d]=g)}return n}(t,n):t,l=n.plainObjects?{__proto__:null}:{},p=Object.keys(f),h=0;h<p.length;++h){var y=p[h],d=c(y,f[y],n,"string"==typeof t);l=r.merge(l,d,n)}return!0===n.allowSparse?l:r.compact(l)}},207:(t,e,n)=>{"use strict";var r=n(920),o=n(176),i=n(902),a=Object.prototype.hasOwnProperty,s={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,c=Array.prototype.push,f=function(t,e){c.apply(t,u(e)?e:[e])},l=Date.prototype.toISOString,p=i.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,filter:void 0,format:p,formatter:i.formatters[p],indices:!1,serializeDate:function(t){return l.call(t)},skipNulls:!1,strictNullHandling:!1},y={},d=function t(e,n,i,a,s,c,l,p,d,g,m,b,v,w,S,A,k,E){for(var _,x=e,O=E,j=0,T=!1;void 0!==(O=O.get(y))&&!T;){var D=O.get(e);if(j+=1,void 0!==D){if(D===j)throw new RangeError("Cyclic object value");T=!0}void 0===O.get(y)&&(j=0)}if("function"==typeof g?x=g(n,x):x instanceof Date?x=v(x):"comma"===i&&u(x)&&(x=o.maybeMap(x,(function(t){return t instanceof Date?v(t):t}))),null===x){if(c)return d&&!A?d(n,h.encoder,k,"key",w):n;x=""}if("string"==typeof(_=x)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||o.isBuffer(x))return d?[S(A?n:d(n,h.encoder,k,"key",w))+"="+S(d(x,h.encoder,k,"value",w))]:[S(n)+"="+S(String(x))];var I,P=[];if(void 0===x)return P;if("comma"===i&&u(x))A&&d&&(x=o.maybeMap(x,d)),I=[{value:x.length>0?x.join(",")||null:void 0}];else if(u(g))I=g;else{var B=Object.keys(x);I=m?B.sort(m):B}var N=p?String(n).replace(/\./g,"%2E"):String(n),R=a&&u(x)&&1===x.length?N+"[]":N;if(s&&u(x)&&0===x.length)return R+"[]";for(var U=0;U<I.length;++U){var $=I[U],C="object"==typeof $&&$&&void 0!==$.value?$.value:x[$];if(!l||null!==C){var F=b&&p?String($).replace(/\./g,"%2E"):String($),M=u(x)?"function"==typeof i?i(R,F):R:R+(b?"."+F:"["+F+"]");E.set(e,j);var L=r();L.set(y,E),f(P,t(C,M,i,a,s,c,l,p,"comma"===i&&A&&u(x)?null:d,g,m,b,v,w,S,A,k,L))}}return P};t.exports=function(t,e){var n,o=t,c=function(t){if(!t)return h;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!a.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r,o=i.formatters[n],c=h.filter;if(("function"==typeof t.filter||u(t.filter))&&(c=t.filter),r=t.arrayFormat in s?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":h.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var f=void 0===t.allowDots?!0===t.encodeDotInKeys||h.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:f,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:void 0===t.delimiter?h.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:h.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:c,format:n,formatter:o,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);"function"==typeof c.filter?o=(0,c.filter)("",o):u(c.filter)&&(n=c.filter);var l=[];if("object"!=typeof o||null===o)return"";var p=s[c.arrayFormat],y="comma"===p&&c.commaRoundTrip;n||(n=Object.keys(o)),c.sort&&n.sort(c.sort);for(var g=r(),m=0;m<n.length;++m){var b=n[m],v=o[b];c.skipNulls&&null===v||f(l,d(v,b,p,y,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var w=l.join(c.delimiter),S=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),w.length>0?S+w:""}},176:(t,e,n)=>{"use strict";var r=n(902),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t,e){for(var n=e&&e.plainObjects?{__proto__:null}:{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},u=1024;t.exports={arrayToObject:s,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],f=a[c];"object"==typeof f&&null!==f&&-1===n.indexOf(f)&&(e.push({obj:a,prop:c}),n.push(f))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n,o,i){if(0===t.length)return t;var s=t;if("symbol"==typeof t?s=Symbol.prototype.toString.call(t):"string"!=typeof t&&(s=String(t)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var c="",f=0;f<s.length;f+=u){for(var l=s.length>=u?s.slice(f,f+u):s,p=[],h=0;h<l.length;++h){var y=l.charCodeAt(h);45===y||46===y||95===y||126===y||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||i===r.RFC1738&&(40===y||41===y)?p[p.length]=l.charAt(h):y<128?p[p.length]=a[y]:y<2048?p[p.length]=a[192|y>>6]+a[128|63&y]:y<55296||y>=57344?p[p.length]=a[224|y>>12]+a[128|y>>6&63]+a[128|63&y]:(h+=1,y=65536+((1023&y)<<10|1023&l.charCodeAt(h)),p[p.length]=a[240|y>>18]+a[128|y>>12&63]+a[128|y>>6&63]+a[128|63&y])}c+=p.join("")}return c},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(i(t)){for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)},merge:function t(e,n,r){if(!n)return e;if("object"!=typeof n&&"function"!=typeof n){if(i(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var a=e;return i(e)&&!i(n)&&(a=s(e,r)),i(e)&&i(n)?(n.forEach((function(n,i){if(o.call(e,i)){var a=e[i];a&&"object"==typeof a&&n&&"object"==typeof n?e[i]=t(a,n,r):e.push(n)}else e[i]=n})),e):Object.keys(n).reduce((function(e,i){var a=n[i];return o.call(e,i)?e[i]=t(e[i],a,r):e[i]=a,e}),a)}}},835:(t,e,n)=>{"use strict";var r=n(655);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),f=["%","/","?",";","#"].concat(c),l=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(98);function b(t,e,n){if(t&&"object"==typeof t&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var b=t=u.join(a);if(b=b.trim(),!n&&1===t.split("#").length){var v=s.exec(b);if(v)return this.path=b,this.href=b,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=i.exec(b);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@/]+@[^@/]+/)){var A="//"===b.substr(0,2);!A||w&&d[w]||(b=b.substr(2),this.slashes=!0)}if(!d[w]&&(A||w&&!g[w])){for(var k,E,_=-1,x=0;x<l.length;x++)-1!==(O=b.indexOf(l[x]))&&(-1===_||O<_)&&(_=O);for(-1!==(E=-1===_?b.lastIndexOf("@"):b.lastIndexOf("@",_))&&(k=b.slice(0,E),b=b.slice(E+1),this.auth=decodeURIComponent(k)),_=-1,x=0;x<f.length;x++){var O;-1!==(O=b.indexOf(f[x]))&&(-1===_||O<_)&&(_=O)}-1===_&&(_=b.length),this.host=b.slice(0,_),b=b.slice(_),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var T=this.hostname.split(/\./),D=(x=0,T.length);x<D;x++){var I=T[x];if(I&&!I.match(p)){for(var P="",B=0,N=I.length;B<N;B++)I.charCodeAt(B)>127?P+="x":P+=I[B];if(!P.match(p)){var R=T.slice(0,x),U=T.slice(x+1),$=I.match(h);$&&(R.push($[1]),U.unshift($[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=r.toASCII(this.hostname));var C=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+C,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[S])for(x=0,D=c.length;x<D;x++){var M=c[x];if(-1!==b.indexOf(M)){var L=encodeURIComponent(M);L===M&&(L=escape(M)),b=b.split(M).join(L)}}var G=b.indexOf("#");-1!==G&&(this.hash=b.substr(G),b=b.slice(0,G));var K=b.indexOf("?");if(-1!==K?(this.search=b.substr(K),this.query=b.substr(K+1),e&&(this.query=m.parse(this.query)),b=b.slice(0,K)):e&&(this.search="",this.query={}),b&&(this.pathname=b),g[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var H=this.search||"";this.path=C+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(i=m.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if("string"==typeof t){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=t[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var f=Object.keys(t),l=0;l<f.length;l++){var p=f[l];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||d[t.protocol])n.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",m=n.search||"";n.path=y+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=v||b||n.host&&t.pathname,S=w,A=n.pathname&&n.pathname.split("/")||[],k=(h=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(k&&(n.hostname="",n.port=null,n.host&&(""===A[0]?A[0]=n.host:A.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),w=w&&(""===h[0]||""===A[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,A=h;else if(h.length)A||(A=[]),A.pop(),A=A.concat(h),n.search=t.search,n.query=t.query;else if(null!=t.search)return k&&(n.host=A.shift(),n.hostname=n.host,(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.hostname=j.shift(),n.host=n.hostname)),n.search=t.search,n.query=t.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!A.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=A.slice(-1)[0],_=(n.host||t.host||A.length>1)&&("."===E||".."===E)||""===E,x=0,O=A.length;O>=0;O--)"."===(E=A[O])?A.splice(O,1):".."===E?(A.splice(O,1),x++):x&&(A.splice(O,1),x--);if(!w&&!S)for(;x--;x)A.unshift("..");!w||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),_&&"/"!==A.join("/").substr(-1)&&A.push("");var j,T=""===A[0]||A[0]&&"/"===A[0].charAt(0);return k&&(n.hostname=T?"":A.length?A.shift():"",n.host=n.hostname,(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.hostname=j.shift(),n.host=n.hostname)),(w=w||n.host&&A.length)&&!T&&A.unshift(""),A.length>0?n.pathname=A.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){return"string"==typeof t&&(t=b(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o},629:e=>{"use strict";e.exports=t},634:()=>{},752:()=>{},488:()=>{},603:()=>{},247:()=>{},79:t=>{"use strict";t.exports=JSON.parse('{"STEALTH_ANNOUNCER_ADDRESS":"","PROOF_OF_INTEGRITY_ADDRESS":""}')}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var o={};return(()=>{"use strict";r.r(o),r.d(o,{GunEth:()=>x,MESSAGE_TO_SIGN:()=>v,default:()=>O,deriveStealthAddress:()=>_,generatePassword:()=>A,generateRandomId:()=>S,getSigner:()=>E,gunToEthAccount:()=>k});var t=r(229),e=r.n(t),n=r(30),i=r.n(n),a=r(629);let s={PROOF_OF_INTEGRITY_ADDRESS:"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",STEALTH_ANNOUNCER_ADDRESS:"0x5FbDB2315678afecb367f032d93F642f64180aa3"};if("undefined"==typeof window){const{fileURLToPath:t}=r(835),{dirname:e}=r(488),{readFileSync:n}=r(752),{join:o}=r(488);try{const r=n(o(e(t("file:///D:/gun-eth/src/config/local.js")),"contract-address.json"),"utf8");s=JSON.parse(r),console.log("Loaded contract addresses:",s)}catch(t){console.warn("Warning: contract-address.json not found or invalid")}}const u={CHAIN_ID:1337,PROOF_OF_INTEGRITY_ADDRESS:s.PROOF_OF_INTEGRITY_ADDRESS,STEALTH_ANNOUNCER_ADDRESS:s.STEALTH_ANNOUNCER_ADDRESS,RPC_URL:"http://127.0.0.1:8545",GUN_PEER:"http://localhost:8765/gun"},c={optimismSepolia:{STEALTH_ANNOUNCER_ADDRESS:"0xD0F2e9DA59d2DFECFdE67CcF17300BB6093A72f8",PROOF_OF_INTEGRITY_ADDRESS:"0x...",RPC_URL:"https://sepolia.optimism.io",CHAIN_ID:11155420},arbitrumSepolia:{STEALTH_ANNOUNCER_ADDRESS:"0x...",PROOF_OF_INTEGRITY_ADDRESS:"0x...",RPC_URL:"https://sepolia-rollup.arbitrum.io/rpc",CHAIN_ID:421614},localhost:{RPC_URL:"http://127.0.0.1:8545",CHAIN_ID:1337}},f=c.optimismSepolia.PROOF_OF_INTEGRITY_ADDRESS,l=c.optimismSepolia.STEALTH_ANNOUNCER_ADDRESS;function p(t){let e;if("localhost"===t)try{const t=r(79);return e={...c.localhost,...t},console.log("Using local addresses:",e),e}catch(t){throw console.warn("No local addresses found"),new Error("No local addresses found. Did you run local deployment?")}if(e=c[t],!e)throw new Error(`Chain ${t} not supported. Supported chains: ${Object.keys(c).join(", ")}`);return e}const h=[{inputs:[{internalType:"address",name:"_devAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{internalType:"string",name:"senderPublicKey",type:"string"},{internalType:"string",name:"spendingPublicKey",type:"string"},{internalType:"address",name:"stealthAddress",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"StealthPaymentAnnounced",type:"event"},{anonymous:!1,inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"DevAddressUpdated",type:"event"},{anonymous:!1,inputs:[{internalType:"uint256",name:"newFee",type:"uint256"}],name:"DevFeeUpdated",type:"event"},{inputs:[{internalType:"string",name:"senderPublicKey",type:"string"},{internalType:"string",name:"spendingPublicKey",type:"string"},{internalType:"address",name:"stealthAddress",type:"address"}],name:"announcePayment",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"devAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"devFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAnnouncementsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"fromIndex",type:"uint256"},{internalType:"uint256",name:"toIndex",type:"uint256"}],name:"getAnnouncementsInRange",outputs:[{components:[{internalType:"string",name:"senderPublicKey",type:"string"},{internalType:"string",name:"spendingPublicKey",type:"string"},{internalType:"address",name:"stealthAddress",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct StealthAnnouncer.StealthAnnouncement[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_newFee",type:"uint256"}],name:"updateDevFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newAddress",type:"address"}],name:"updateDevAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawStuckETH",outputs:[],stateMutability:"nonpayable",type:"function"}],y=[{inputs:[{internalType:"bytes[]",name:"nodeIds",type:"bytes[]"},{internalType:"bytes32[]",name:"contentHashes",type:"bytes32[]"}],name:"batchUpdateData",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes",name:"nodeId",type:"bytes"},{indexed:!1,internalType:"bytes32",name:"contentHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"updater",type:"address"}],name:"DataUpdated",type:"event"},{inputs:[{internalType:"bytes",name:"nodeId",type:"bytes"}],name:"getLatestRecord",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"nodeId",type:"bytes"},{internalType:"bytes32",name:"contentHash",type:"bytes32"}],name:"updateData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"nodeId",type:"bytes"},{internalType:"bytes32",name:"contentHash",type:"bytes32"}],name:"verifyData",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];var d=r(287).hp;let g,m="",b="";const v="Access GunDB with Ethereum";let w={PROOF_OF_INTEGRITY_ADDRESS:f,STEALTH_ANNOUNCER_ADDRESS:l};if("undefined"==typeof window){const{fileURLToPath:t}=r(835),{dirname:e}=r(247),{readFileSync:n}=r(603),o=r(247),i=e(t("file:///D:/gun-eth/src/index.js"));try{const t=n(o.join(i,"contract-address.json"),"utf8");w=JSON.parse(t),console.log("Loaded contract addresses:",w)}catch(t){console.warn("Warning: contract-address.json not found or invalid")}}function S(){return a.ethers.hexlify(a.ethers.randomBytes(32)).slice(2)}function A(t){try{const e=a.ethers.hexlify(t),n=a.ethers.keccak256(e);return console.log("Generated password:",n),n}catch(t){return console.error("Error generating password:",t),null}}function k(t){const e="0x"+(t=>{const e="=".repeat((4-t.length%4)%4),n=t.replace(/-/g,"+").replace(/_/g,"/")+e,r=atob(n);return Array.from(r,(t=>t.charCodeAt(0).toString(16).padStart(2,"0"))).join("")})(t),n=new a.ethers.Wallet(e);return{account:n,publicKey:n.address,privateKey:e}}const E=async()=>{if(m&&b){const t=new a.ethers.JsonRpcProvider(m,{chainId:u.CHAIN_ID,name:"localhost"});return new a.ethers.Wallet(b,t)}if("undefined"!=typeof window&&void 0!==window.ethereum)return await window.ethereum.request({method:"eth_requestAccounts"}),new a.ethers.BrowserProvider(window.ethereum).getSigner();throw new Error("No valid Ethereum provider found")};function _(t,e){try{const n=d.from(t,"base64"),r=a.ethers.keccak256(a.ethers.concat([n,a.ethers.getBytes(e)])),o=new a.ethers.Wallet(r);return console.log("Debug deriveStealthAddress:",{sharedSecretHex:a.ethers.hexlify(n),spendingPublicKey:e,stealthPrivateKey:r,stealthAddress:o.address}),{stealthPrivateKey:r,stealthAddress:o.address,wallet:o}}catch(t){throw console.error("Error in deriveStealthAddress:",t),t}}e().chain.MESSAGE_TO_SIGN=v,e().chain.setSigner=function(t,e){return m=t,b=e,console.log("Standalone configuration set"),this},e().chain.getSigner=E(),e().chain.verifySignature=async function(t,e){try{return a.ethers.verifyMessage(t,e)}catch(t){return console.error("Error verifying signature:",t),null}},e().chain.generatePassword=function(t){return A(t)},e().chain.createSignature=async function(t){try{if(t!==v)throw new Error("Invalid message, valid message is: "+v);const e=await E(),n=await e.signMessage(t);return console.log("Signature created:",n),n}catch(t){return console.error("Error creating signature:",t),null}},e().chain.createAndStoreEncryptedPair=async function(t,e){try{const n=this,r=await i().pair(),o=await i().pair(),a=await i().pair(),s=A(e),u=await i().encrypt(JSON.stringify(r),s),c=await i().encrypt(JSON.stringify(o),s),f=await i().encrypt(JSON.stringify(a),s),l=k(o.priv),p=k(a.priv);n.get("gun-eth").get("users").get(t).put({pair:u,v_pair:c,s_pair:f,publicKeys:{viewingPublicKey:o.epub,viewingPublicKey:o.epub,spendingPublicKey:p.publicKey,ethViewingAddress:l.publicKey}}),console.log("Encrypted pairs and public keys stored for:",t)}catch(t){throw console.error("Error creating and storing encrypted pair:",t),t}},e().chain.getAndDecryptPair=async function(t,e){try{const n=this,r=await n.get("gun-eth").get("users").get(t).get("pair").then();if(!r)throw new Error("No encrypted data found for this address");const o=A(e),a=await i().decrypt(r,o);return console.log(a),a}catch(t){return console.error("Error retrieving and decrypting pair:",t),null}},e().chain.proof=function(t,e,n,r){if(console.log("Proof plugin called with:",{chain:t,nodeId:e,data:n}),"function"!=typeof r)return console.error("Callback must be a function"),this;try{const o=isLocalEnvironment()?"localhost":t,i=p(o);console.log(`Using ${o} configuration:`,i),new a.ethers.Contract(i.PROOF_OF_INTEGRITY_ADDRESS,y,signer);const s=async(t,e)=>{console.log("Verifying on chain:",{nodeId:t,contentHash:e});const n=await E(),r=new a.ethers.Contract(g,y,n),[o,i,s]=await r.verifyData(a.ethers.toUtf8Bytes(t),e);return console.log("Verification result:",{isValid:o,timestamp:i,updater:s}),{isValid:o,timestamp:i,updater:s}},u=async(t,e)=>{console.log("Writing on chain:",{nodeId:t,contentHash:e});const n=await E(),r=new a.ethers.Contract(g,y,n),o=await r.updateData(a.ethers.toUtf8Bytes(t),e);console.log("Transaction sent:",o.hash);const i=await o.wait();return console.log("Transaction confirmed:",i),o},c=async t=>{const e=await E(),n=new a.ethers.Contract(g,y,e),[r,o,i]=await n.getLatestRecord(a.ethers.toUtf8Bytes(t));return console.log("Latest record from blockchain:",{nodeId:t,contentHash:r,timestamp:o,updater:i}),{contentHash:r,timestamp:o,updater:i}};if(e&&!n)gun.get(e).once((async t=>{if(!t)return void(r&&r({err:"Node not found in GunDB"}));console.log("existingData",t);const n=t._contentHash;if(console.log("contentHash",n),n)try{const{isValid:t,timestamp:o,updater:i}=await s(e,n),a=await c(e);t?r&&r({ok:!0,message:"Data verified on blockchain",timestamp:o,updater:i,latestRecord:a}):r&&r({ok:!1,message:"Data not verified on blockchain",latestRecord:a})}catch(t){r&&r({err:t.message})}else r&&r({err:"No content hash found for this node"})}));else if(n&&!e){const t=S(),e=JSON.stringify(n),o=a.ethers.keccak256(a.ethers.toUtf8Bytes(e));gun.get(t).put({...n,_contentHash:o},(async e=>{if(console.log("ack",e),e.err)r&&r({err:"Error saving data to GunDB"});else try{const e=await u(t,o);r&&r({ok:!0,message:"Data written to GunDB and blockchain",nodeId:t,txHash:e.hash})}catch(t){r&&r({err:t.message})}}))}else r&&r({err:"Invalid input. Provide either nodeId or data, not both."});return gun}catch(t){return r({err:t.message}),this}},e().chain.gunToEthAccount=function(t){return k(t)},e().chain.generateStealthAddress=async function(t,e){try{const n=this,r=await n.get("gun-eth").get("users").get(t).get("publicKeys").then();if(!r||!r.viewingPublicKey||!r.spendingPublicKey)throw new Error("Recipient's public keys not found");const o=await this.verifySignature(v,e),a=A(e),s=await n.get("gun-eth").get("users").get(o).then();if(!s||!s.s_pair)throw new Error("Sender's keys not found");let u;try{const t=await i().decrypt(s.s_pair,a);u="string"==typeof t?JSON.parse(t):t}catch(t){throw console.error("Error decrypting spending pair:",t),new Error("Unable to decrypt spending pair")}const c=await i().secret(r.viewingPublicKey,u);if(!c)throw new Error("Unable to generate shared secret");console.log("Generate shared secret:",c);const{stealthAddress:f}=_(c,r.spendingPublicKey);return{stealthAddress:f,senderPublicKey:u.epub,spendingPublicKey:r.spendingPublicKey}}catch(t){throw console.error("Error generating stealth address:",t),t}},e().chain.publishStealthKeys=async function(t){try{const e=this,n=await this.verifySignature(v,t),r=A(t),o=await e.get("gun-eth").get("users").get(n).then();if(!o||!o.v_pair||!o.s_pair)throw new Error("Keys not found");const a=JSON.parse(await i().decrypt(o.v_pair,r)),s=JSON.parse(await i().decrypt(o.s_pair,r)),u=k(a.priv),c=k(s.priv);e.get("gun-eth").get("users").get(n).get("publicKeys").put({viewingPublicKey:u.publicKey,spendingPublicKey:c.publicKey}),console.log("Stealth public keys published successfully")}catch(t){throw console.error("Error publishing stealth keys:",t),t}},e().chain.recoverStealthFunds=async function(t,e,n,r){try{const o=this,a=A(n),s=await this.verifySignature(v,n),u=await o.get("gun-eth").get("users").get(s).then();if(!u||!u.v_pair||!u.s_pair)throw new Error("Keys not found");let c;try{const t=await i().decrypt(u.v_pair,a);c="string"==typeof t?JSON.parse(t):t}catch(t){throw console.error("Error decrypting keys:",t),new Error("Unable to decrypt keys")}const f=await i().secret(e,c);if(!f)throw new Error("Unable to generate shared secret");console.log("Recover shared secret:",f);const{wallet:l,stealthAddress:p}=_(f,r);if(p.toLowerCase()!==t.toLowerCase())throw console.error("Mismatch:",{recovered:p,expected:t,sharedSecret:f}),new Error("Recovered stealth address does not match");return{wallet:l,address:p}}catch(t){throw console.error("Error recovering stealth funds:",t),t}},e().chain.announceStealthPayment=async function(t,e,n,r,o={onChain:!1,chain:"optimismSepolia"}){try{const i=this,s=await this.verifySignature(v,r);if(o.onChain){const r=await E(),i=p(o.chain).STEALTH_ANNOUNCER_ADDRESS;console.log("Using contract address:",i);const s=new a.ethers.Contract(i,h,r),u=await s.devFee();console.log("Dev fee:",u.toString());const c=await s.announcePayment(e,n,t,{value:u});console.log("Transaction sent:",c.hash);const f=await c.wait();console.log("Transaction confirmed:",f.hash),console.log("Stealth payment announced on-chain (dev fee paid)")}else i.get("gun-eth").get("stealth-payments").set({stealthAddress:t,senderAddress:s,senderPublicKey:e,spendingPublicKey:n,timestamp:Date.now()}),console.log("Stealth payment announced off-chain")}catch(t){throw console.error("Error announcing stealth payment:",t),console.error("Error details:",t.stack),t}},e().chain.getStealthPayments=async function(t,e={source:"both"}){try{const n=[];if("onChain"===e.source||"both"===e.source){const e=await E(),r=l,o=new a.ethers.Contract(r,h,e);try{const e=await o.getAnnouncementsCount(),r=Number(e.toString());if(console.log("Total on-chain announcements:",r),r>0){const e=100,i=r-1;for(let r=0;r<=i;r+=e){const a=Math.min(r+e-1,i),s=await o.getAnnouncementsInRange(r,a);for(const e of s)try{if(!(e&&e.stealthAddress&&e.senderPublicKey&&e.spendingPublicKey)){console.log("Invalid announcement:",e);continue}const r=await this.recoverStealthFunds(e.stealthAddress,e.senderPublicKey,t,e.spendingPublicKey);n.push({stealthAddress:e.stealthAddress,senderPublicKey:e.senderPublicKey,spendingPublicKey:e.spendingPublicKey,timestamp:Number(e.timestamp),source:"onChain",wallet:r})}catch(t){console.log(`Announcement not for us: ${e.stealthAddress}`);continue}}}}catch(t){console.error("Error retrieving on-chain announcements:",t)}}if("offChain"===e.source||"both"===e.source){const t=this,e=await new Promise((e=>{const n=[];t.get("gun-eth").get("stealth-payments").get(recipientAddress).map().once(((t,e)=>{t?.stealthAddress&&n.push({...t,id:e,source:"offChain"})})),setTimeout((()=>e(n)),2e3)}));n.push(...e)}return console.log(`Found ${n.length} stealth payments`),n}catch(t){throw console.error("Error retrieving stealth payments:",t),t}},e().chain.cleanStealthPayments=async function(t){try{const e=this,n=await e.get("gun-eth").get("stealth-payments").get(t).map().once().then();n&&Object.keys(n).forEach((async r=>{const o=n[r];o&&o.stealthAddress&&o.senderPublicKey&&o.spendingPublicKey||await e.get("gun-eth").get("stealth-payments").get(t).get(r).put(null)}))}catch(t){console.error("Error cleaning stealth payments:",t)}};class x{static generateRandomId=S;static generatePassword=A;static gunToEthAccount=k;static getSigner=E;static deriveStealthAddress=_;static chainMethods={setSigner:e().chain.setSigner,getSigner:e().chain.getSigner,verifySignature:e().chain.verifySignature,generatePassword:e().chain.generatePassword,createSignature:e().chain.createSignature,createAndStoreEncryptedPair:e().chain.createAndStoreEncryptedPair,getAndDecryptPair:e().chain.getAndDecryptPair,proof:e().chain.proof,gunToEthAccount:e().chain.gunToEthAccount,generateStealthAddress:e().chain.generateStealthAddress,publishStealthKeys:e().chain.publishStealthKeys,recoverStealthFunds:e().chain.recoverStealthFunds,announceStealthPayment:e().chain.announceStealthPayment,getStealthPayments:e().chain.getStealthPayments,cleanStealthPayments:e().chain.cleanStealthPayments};static MESSAGE_TO_SIGN=v;static PROOF_CONTRACT_ADDRESS=g;static LOCAL_CONFIG=u}const O=e()})(),o})()));